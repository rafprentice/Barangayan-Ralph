import React, { useState, useEffect } from 'react';
import { ImageWithFallback } from './components/figma/ImageWithFallback';
import managementPortalImage from 'figma:asset/c7c8344d2ce0a847a5676aec4f81df1de46f9924.png';
import formsLayoutImage from 'figma:asset/7c8f286e5205035a01d69ae277fd469845ebe942.png';
import documentRequestImage from 'figma:asset/f6b563938cc38aa3fa62f45542498160bd74dbb5.png';
import { Button } from './components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from './components/ui/card';
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from './components/ui/dialog';
import { Input } from './components/ui/input';
import { Label } from './components/ui/label';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './components/ui/select';
import { Textarea } from './components/ui/textarea';
import { Badge } from './components/ui/badge';
import { Separator } from './components/ui/separator';
import { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetTrigger } from './components/ui/sheet';
import { Menu, X, FileText, CreditCard, AlertTriangle, Calendar, Bell, BellOff, Home, Users, Info, MessageSquare, Shield, Building, UserCircle, Megaphone, Car, Phone, MapPin, Mail, Search, Camera, Mountain, Briefcase, Eye, Gavel, QrCode, LogOut, CheckCircle, Settings, FolderOpen, ToggleLeft, ToggleRight, Download, Lock, Trash2, HelpCircle } from 'lucide-react';
import { AuthProvider, useAuth } from './contexts/AuthContext';
import { db, DocumentRequest, Notification as DBNotification, Announcement } from './services/database';
import { toast, Toaster } from 'sonner@2.0.3';
import { AuthPages } from './components/AuthPages';

function BarangayanApp() {
  const { currentUser, isLoggedIn, login, loginWithGoogle, register, logout } = useAuth();
  const [currentSection, setCurrentSection] = useState('home');
  const [modalOpen, setModalOpen] = useState(false);
  const [modalContent, setModalContent] = useState<React.ReactNode>(null);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  
  const [showRegistration, setShowRegistration] = useState(false);
  const [registrationSuccess, setRegistrationSuccess] = useState(false);
  const [userPanelOpen, setUserPanelOpen] = useState(false);
  
  // User preferences
  const [highContrast, setHighContrast] = useState(false);
  const [dyslexiaFont, setDyslexiaFont] = useState(false);
  
  // Database state
  const [submittedForms, setSubmittedForms] = useState<DocumentRequest[]>([]);
  const [notifications, setNotifications] = useState<DBNotification[]>([]);
  const [announcements, setAnnouncements] = useState<Announcement[]>([]);
  const [userStats, setUserStats] = useState({
    totalRequests: 0,
    pendingRequests: 0,
    completedRequests: 0,
    unreadNotifications: 0
  });

  // Load user data when logged in
  useEffect(() => {
    if (currentUser) {
      loadUserData();
    }
  }, [currentUser]);

  // Load announcements on mount
  useEffect(() => {
    loadAnnouncements();
  }, []);

  const loadUserData = async () => {
    if (!currentUser) return;
    
    try {
      const [requests, userNotifications, stats] = await Promise.all([
        db.getDocumentRequestsByUser(currentUser.id),
        db.getNotificationsByUser(currentUser.id),
        db.getUserStats(currentUser.id)
      ]);
      
      setSubmittedForms(requests);
      setNotifications(userNotifications);
      setUserStats(stats);
    } catch (error) {
      console.error('Error loading user data:', error);
    }
  };

  const loadAnnouncements = async () => {
    try {
      const activeAnnouncements = await db.getActiveAnnouncements();
      setAnnouncements(activeAnnouncements);
    } catch (error) {
      console.error('Error loading announcements:', error);
    }
  };

  const showModal = (content: React.ReactNode) => {
    setModalContent(content);
    setModalOpen(true);
  };

  const showSection = (section: string) => {
    setCurrentSection(section);
    setMobileMenuOpen(false);
    window.scrollTo(0, 0);
  };

  const BarangayLogo = () => (
    <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center border-4 border-yellow-400">
      <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="18" fill="#4169E1" stroke="#FFD700" strokeWidth="2"/>
        <path d="M20 8L12 16V32H28V16L20 8Z" fill="#8B4513"/>
        <path d="M12 16L20 8L28 16H12Z" fill="#D2691E"/>
        <rect x="18" y="22" width="4" height="10" fill="#654321"/>
        <rect x="14" y="20" width="3" height="3" fill="#4169E1"/>
        <rect x="23" y="20" width="3" height="3" fill="#4169E1"/>
        <text x="20" y="35" textAnchor="middle" fontSize="6" fill="#FFD700" fontWeight="bold">BRGY</text>
      </svg>
    </div>
  );

  // Handle logout
  const handleLogout = () => {
    logout();
    setUserPanelOpen(false);
    setSubmittedForms([]);
    setNotifications([]);
    setUserStats({
      totalRequests: 0,
      pendingRequests: 0,
      completedRequests: 0,
      unreadNotifications: 0
    });
    toast.success('Successfully logged out!');
  };

  // Handle successful login
  const handleLogin = async (emailOrId: string, password: string) => {
    try {
      await login(emailOrId, password);
      setModalOpen(false);
      toast.success('Login successful! Welcome to Barangayan E Management System.');
    } catch (error: any) {
      toast.error(error.message || 'Login failed. Please check your credentials.');
    }
  };

  // Handle Google login
  const handleGoogleLogin = async () => {
    try {
      // Simulate Google OAuth (in production, use actual Google Sign-In)
      const mockGoogleUser = {
        googleId: 'google_' + Date.now(),
        email: 'user@gmail.com',
        firstName: 'Google',
        lastName: 'User'
      };
      
      await loginWithGoogle(
        mockGoogleUser.googleId,
        mockGoogleUser.email,
        mockGoogleUser.firstName,
        mockGoogleUser.lastName
      );
      
      setModalOpen(false);
      toast.success('Signed in with Google successfully!');
    } catch (error: any) {
      toast.error(error.message || 'Google sign-in failed.');
    }
  };



  // Registration Success Modal
  const RegistrationSuccessModal = () => (
    <DialogContent className="max-w-md" aria-describedby="registration-success-description">
      <DialogHeader>
        <DialogTitle className="flex items-center text-green-800">
          <CheckCircle className="w-6 h-6 mr-2 text-green-600" />
          Registration Successful!
        </DialogTitle>
        <DialogDescription id="registration-success-description">
          Your account has been created successfully. You can now log in to access barangay services.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4">
        <div className="p-4 bg-green-50 rounded-lg">
          <h4 className="font-semibold text-green-800 mb-2">Account Created</h4>
          <p className="text-sm text-green-700">
            Your registration is being processed. You will receive a confirmation email shortly.
          </p>
        </div>
        
        <div className="p-4 bg-green-50 rounded-lg">
          <h4 className="font-semibold text-green-800 mb-2">Next Steps</h4>
          <ul className="text-sm text-green-700 space-y-1">
            <li>• Check your email for verification link</li>
            <li>• Visit the barangay office for ID verification</li>
            <li>• Start using digital services immediately</li>
          </ul>
        </div>
        
        <div className="flex space-x-2">
          <Button 
            className="flex-1" 
            onClick={() => {
              setRegistrationSuccess(false);
              setShowRegistration(false);
              setModalOpen(false);
              showModal(<LoginModal />);
            }}
          >
            Login Now
          </Button>
          <Button 
            variant="outline" 
            className="flex-1" 
            onClick={() => {
              setRegistrationSuccess(false);
              setModalOpen(false);
            }}
          >
            Continue Browsing
          </Button>
        </div>
      </div>
    </DialogContent>
  );

  // Registration Modal
  const RegistrationModal = () => (
    <DialogContent className="max-w-3xl max-h-[90vh] overflow-y-auto" aria-describedby="registration-description">
      <DialogHeader>
        <div className="text-center">
          <div className="w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
            <UserCircle className="w-8 h-8 text-white" />
          </div>
          <DialogTitle className="text-2xl">Create Your Barangayan Account</DialogTitle>
          <DialogDescription id="registration-description" className="mt-2">
            Join our digital community and access all barangay services with ease
          </DialogDescription>
        </div>
      </DialogHeader>
      
      <form className="space-y-4" onSubmit={async (e) => { 
        e.preventDefault(); 
        const formData = new FormData(e.target as HTMLFormElement);
        
        try {
          await register({
            email: formData.get('email') as string,
            password: formData.get('password') as string,
            firstName: formData.get('firstName') as string,
            lastName: formData.get('lastName') as string,
            middleName: formData.get('middleName') as string || undefined,
            birthDate: formData.get('birthDate') as string,
            gender: formData.get('gender') as string,
            address: formData.get('address') as string,
            residentId: formData.get('residentId') as string || undefined,
            contactNumber: formData.get('contactNumber') as string,
            idType: formData.get('idType') as string,
            idNumber: formData.get('idNumber') as string,
            hasQR: !!(formData.get('hasQR'))
          });
          
          setShowRegistration(false);
          setRegistrationSuccess(true);
          showModal(<RegistrationSuccessModal />);
          toast.success('Registration successful! Welcome to Barangayan!');
        } catch (error: any) {
          toast.error(error.message || 'Registration failed. Please try again.');
        }
      }}>
        {/* Personal Information */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">Personal Information</h3>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <Label>First Name *</Label>
              <Input name="firstName" placeholder="Enter first name" required />
            </div>
            <div>
              <Label>Last Name *</Label>
              <Input name="lastName" placeholder="Enter last name" required />
            </div>
            <div>
              <Label>Middle Name</Label>
              <Input name="middleName" placeholder="Enter middle name (optional)" />
            </div>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <Label>Birth Date *</Label>
              <Input name="birthDate" type="date" required />
            </div>
            <div>
              <Label>Sex/Gender *</Label>
              <Select name="gender" required>
                <SelectTrigger>
                  <SelectValue placeholder="Select gender" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="male">Male</SelectItem>
                  <SelectItem value="female">Female</SelectItem>
                  <SelectItem value="other">Other</SelectItem>
                  <SelectItem value="prefer_not_to_say">Prefer not to say</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>
          
          <div>
            <Label>Complete Address *</Label>
            <Textarea name="address" placeholder="House No., Street, Barangay, City, Province" required />
          </div>
        </div>

        {/* Account Information */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">Account Information</h3>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <Label>Email Address *</Label>
              <Input name="email" type="email" placeholder="your.email@gmail.com" required />
              <p className="text-xs text-gray-500 mt-1">Can be linked to your Google account</p>
            </div>
            <div>
              <Label>Password *</Label>
              <Input name="password" type="password" placeholder="Create a strong password" required />
            </div>
          </div>
          
          <div>
            <Label>Resident ID (if you have one)</Label>
            <Input name="residentId" placeholder="RES-2024-XXX" />
            <p className="text-xs text-gray-500 mt-1">Leave blank if you don't have a resident ID yet</p>
          </div>
        </div>

        {/* ID Verification */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">ID Verification</h3>
          
          <div>
            <Label>Valid Philippine ID Type *</Label>
            <Select name="idType" required>
              <SelectTrigger>
                <SelectValue placeholder="Select your valid ID type" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="national_id">National ID (PhilSys)</SelectItem>
                <SelectItem value="drivers_license">Driver's License</SelectItem>
                <SelectItem value="passport">Philippine Passport</SelectItem>
                <SelectItem value="umid">UMID</SelectItem>
                <SelectItem value="sss_id">SSS ID</SelectItem>
                <SelectItem value="philhealth_id">PhilHealth ID</SelectItem>
                <SelectItem value="tin_id">TIN ID</SelectItem>
                <SelectItem value="postal_id">Postal ID</SelectItem>
                <SelectItem value="voters_id">Voter's ID</SelectItem>
                <SelectItem value="senior_citizen_id">Senior Citizen ID</SelectItem>
                <SelectItem value="pwd_id">PWD ID</SelectItem>
                <SelectItem value="student_id">Student ID</SelectItem>
                <SelectItem value="school_id">School ID</SelectItem>
                <SelectItem value="company_id">Company ID</SelectItem>
                <SelectItem value="barangay_id">Barangay ID</SelectItem>
                <SelectItem value="prc_license">PRC License</SelectItem>
              </SelectContent>
            </Select>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <Label>ID Number *</Label>
              <Input name="idNumber" placeholder="Enter your ID number" required />
            </div>
            <div>
              <Label>Contact Number *</Label>
              <Input name="contactNumber" type="tel" placeholder="+63 XXX XXX XXXX" required />
            </div>
          </div>
          
          <div className="p-4 bg-yellow-50 rounded-lg">
            <h4 className="font-semibold text-yellow-800 mb-2">QR Code Feature</h4>
            <p className="text-sm text-yellow-700 mb-2">
              If your ID has a QR code, you can use it for quick login after registration.
            </p>
            <div className="flex items-center space-x-2">
              <input type="checkbox" id="hasQR" name="hasQR" />
              <label htmlFor="hasQR" className="text-sm">My ID has a QR code for quick login</label>
            </div>
          </div>
        </div>

        {/* Terms and Conditions */}
        <div className="space-y-4">
          <div className="p-4 bg-green-50 rounded-lg">
            <h4 className="font-semibold text-green-800 mb-2">Terms and Conditions</h4>
            <div className="space-y-2">
              <label className="flex items-start space-x-2">
                <input type="checkbox" required className="mt-1" />
                <span className="text-sm text-green-700">
                  I agree to the <button type="button" className="underline">Terms of Service</button> and <button type="button" className="underline">Privacy Policy</button>
                </span>
              </label>
              <label className="flex items-start space-x-2">
                <input type="checkbox" required className="mt-1" />
                <span className="text-sm text-green-700">
                  I consent to the collection and processing of my personal data in accordance with the Data Privacy Act of 2012
                </span>
              </label>
              <label className="flex items-start space-x-2">
                <input type="checkbox" className="mt-1" />
                <span className="text-sm text-green-700">
                  I would like to receive SMS and email notifications about barangay services and announcements
                </span>
              </label>
            </div>
          </div>
        </div>

        <div className="flex space-x-3">
          <Button 
            type="submit" 
            className="flex-1 h-12 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700"
          >
            <CheckCircle className="w-5 h-5 mr-2" />
            Create Account
          </Button>
          <Button 
            type="button" 
            variant="outline" 
            className="flex-1 h-12 border-2" 
            onClick={() => {
              setShowRegistration(false);
              showModal(<LoginModal />);
            }}
          >
            <Mail className="w-5 h-5 mr-2" />
            Back to Login
          </Button>
        </div>
        
        <div className="p-4 bg-gray-50 rounded-lg">
          <h4 className="font-semibold mb-2">Need Help?</h4>
          <p className="text-sm text-gray-600 mb-2">
            Visit the barangay office during business hours for assistance with registration.
          </p>
          <p className="text-sm text-gray-600">
            <strong>Office Hours:</strong> Monday-Friday 8:00 AM - 5:00 PM, Saturday 8:00 AM - 12:00 PM
          </p>
        </div>
      </form>
    </DialogContent>
  );

  const LoginModal = () => {
    const [loginMethod, setLoginMethod] = useState<'manual' | 'qr'>('manual');
    
    return (
      <DialogContent className="max-w-lg" aria-describedby="login-description">
        <DialogHeader>
          <DialogTitle className="text-center">Welcome Back!</DialogTitle>
          <DialogDescription id="login-description" className="text-center">
            Choose your preferred login method to access barangay services
          </DialogDescription>
        </DialogHeader>
        
        {/* Login Method Toggle */}
        <div className="flex bg-gray-100 rounded-lg p-1 mb-6">
          <button
            type="button"
            className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${
              loginMethod === 'manual' 
                ? 'bg-white text-yellow-600 shadow-sm' 
                : 'text-gray-600 hover:text-gray-800'
            }`}
            onClick={() => setLoginMethod('manual')}
          >
            <Mail className="w-4 h-4 inline mr-2" />
            Email / ID
          </button>
          <button
            type="button"
            className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${
              loginMethod === 'qr' 
                ? 'bg-white text-green-600 shadow-sm' 
                : 'text-gray-600 hover:text-gray-800'
            }`}
            onClick={() => setLoginMethod('qr')}
          >
            <QrCode className="w-4 h-4 inline mr-2" />
            QR Code
          </button>
        </div>
        
        {loginMethod === 'manual' ? (
          /* Manual Login Form */
          <form className="space-y-4" onSubmit={async (e) => { 
            e.preventDefault(); 
            const formData = new FormData(e.target as HTMLFormElement);
            await handleLogin(
              formData.get('emailOrId') as string,
              formData.get('password') as string
            );
          }}>
            <div className="space-y-4">
              <div>
                <Label className="text-sm font-medium">Email or Resident ID</Label>
                <div className="relative">
                  <Mail className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
                  <Input 
                    name="emailOrId" 
                    placeholder="Enter your email or resident ID" 
                    className="pl-10 h-12 border-2 focus:border-yellow-500" 
                    required 
                  />
                </div>
              </div>
              
              <div>
                <Label className="text-sm font-medium">Password</Label>
                <div className="relative">
                  <UserCircle className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
                  <Input 
                    name="password" 
                    type="password" 
                    placeholder="Enter your password" 
                    className="pl-10 h-12 border-2 focus:border-green-500" 
                    required 
                  />
                </div>
              </div>
            </div>
            
            <div className="flex items-center justify-between">
              <label className="flex items-center">
                <input type="checkbox" className="rounded border-gray-300 text-yellow-600 focus:ring-yellow-500" />
                <span className="ml-2 text-sm text-gray-600">Remember me</span>
              </label>
              <Button variant="link" className="text-sm text-yellow-600 p-0">
                Forgot Password?
              </Button>
            </div>
            
            <Button type="submit" className="w-full h-12 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700">
              Sign In
            </Button>
            
            <div className="text-center">
              <span className="text-sm text-gray-600">Don't have an account? </span>
              <Button 
                variant="link" 
                className="text-sm text-green-600 p-0 font-semibold" 
                onClick={() => {
                  setShowRegistration(true);
                  showModal(<RegistrationModal />);
                }}
              >
                Create Account
              </Button>
            </div>
            
            <div className="p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200">
              <h4 className="font-semibold text-blue-800 text-sm mb-2 flex items-center">
                <CheckCircle className="w-4 h-4 mr-2" />
                Demo Account
              </h4>
              <p className="text-xs text-blue-700">
                <strong>Email:</strong> demo@barangayan.gov<br />
                <strong>Password:</strong> demo123
              </p>
            </div>
          </form>
        ) : (
          /* QR Code Login */
          <div className="space-y-6">
            <div className="text-center">
              <div className="mx-auto w-64 h-64 bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl border-2 border-dashed border-blue-300 flex flex-col items-center justify-center p-6">
                <div className="w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mb-4">
                  <QrCode className="w-8 h-8 text-white" />
                </div>
                <h3 className="font-semibold text-gray-800 mb-2">Scan QR Code</h3>
                <p className="text-sm text-gray-600 text-center mb-4">
                  Position your ID's QR code in the scanning area
                </p>
                <div className="w-full h-24 bg-white rounded-lg border-2 border-gray-200 flex items-center justify-center">
                  <div className="text-center">
                    <Camera className="w-6 h-6 mx-auto mb-1 text-gray-400" />
                    <p className="text-xs text-gray-500">Camera Preview</p>
                  </div>
                </div>
              </div>
            </div>
            
            <div className="space-y-4">
              <Button 
                className="w-full h-12 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700" 
                onClick={async () => {
                  // Simulate successful QR scan (demo purposes)
                  await handleLogin('demo@barangayan.gov', 'demo123');
                }}
              >
                <QrCode className="w-5 h-5 mr-2" />
                Start QR Scan
              </Button>
              
              <div className="grid grid-cols-2 gap-3">
                <Button 
                  variant="outline" 
                  className="border-2" 
                  onClick={async () => {
                    // Quick demo scan
                    await handleLogin('demo@barangayan.gov', 'demo123');
                  }}
                >
                  <CheckCircle className="w-4 h-4 mr-2 text-green-600" />
                  Demo Scan
                </Button>
                <Button 
                  variant="outline" 
                  className="border-2" 
                  onClick={() => setLoginMethod('manual')}
                >
                  <Mail className="w-4 h-4 mr-2" />
                  Use Email
                </Button>
              </div>
            </div>
            
            <div className="p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200">
              <h4 className="font-semibold text-purple-800 text-sm mb-2 flex items-center">
                <QrCode className="w-4 h-4 mr-2" />
                Supported QR IDs
              </h4>
              <div className="grid grid-cols-2 gap-2 text-xs text-purple-700">
                <div>• National ID</div>
                <div>• Driver's License</div>
                <div>• UMID</div>
                <div>• Student ID</div>
                <div>• Postal ID</div>
                <div>• Voter's ID</div>
              </div>
            </div>
            
            <div className="text-center">
              <span className="text-sm text-gray-600">Need help? </span>
              <Button variant="link" className="text-sm text-green-600 p-0">
                Contact Support
              </Button>
            </div>
          </div>
        )}
      </DialogContent>
    );
  };

  // Business Closure Notice Modal
  const BusinessClosureModal = () => (
    <DialogContent className="max-w-2xl max-h-[80vh] overflow-y-auto" aria-describedby="business-closure-description">
      <DialogHeader>
        <DialogTitle>Business Closure Notice Form</DialogTitle>
        <DialogDescription id="business-closure-description">
          Notify the barangay authorities about the closure of your business establishment.
        </DialogDescription>
      </DialogHeader>
      
      <form className="space-y-4" onSubmit={async (e) => { 
        e.preventDefault(); 
        
        if (!currentUser) {
          toast.error('Please login to submit a request');
          return;
        }
        
        const formData = new FormData(e.target as HTMLFormElement);
        const formObject: Record<string, any> = {};
        formData.forEach((value, key) => {
          formObject[key] = value;
        });
        
        try {
          const newRequest = await db.createDocumentRequest({
            userId: currentUser.id,
            type: 'Business Closure Notice',
            applicantName: formObject.applicantName,
            expectedCompletion: new Date(Date.now() + 5*24*60*60*1000).toISOString().split('T')[0],
            formData: formObject
          });
          
          await loadUserData();
          toast.success(`Business Closure Notice submitted successfully! Reference: ${newRequest.id}`);
          setModalOpen(false);
        } catch (error: any) {
          toast.error(error.message || 'Failed to submit request');
        } 
      }}>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Business Name *</Label>
            <Input name="businessName" placeholder="Enter business name" required />
          </div>
          <div>
            <Label>Business Permit Number *</Label>
            <Input name="permitNumber" placeholder="BP-2024-XXX" required />
          </div>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Owner/Applicant Name *</Label>
            <Input name="applicantName" placeholder="Enter full name" required />
          </div>
          <div>
            <Label>Contact Number *</Label>
            <Input name="contactNumber" type="tel" placeholder="+63 XXX XXX XXXX" required />
          </div>
        </div>
        
        <div>
          <Label>Business Address *</Label>
          <Textarea name="businessAddress" placeholder="Complete business address" required />
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Date of Closure *</Label>
            <Input name="closureDate" type="date" required />
          </div>
          <div>
            <Label>Reason for Closure *</Label>
            <Select name="closureReason" required>
              <SelectTrigger>
                <SelectValue placeholder="Select reason" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="business_relocation">Business Relocation</SelectItem>
                <SelectItem value="financial_reasons">Financial Reasons</SelectItem>
                <SelectItem value="retirement">Retirement</SelectItem>
                <SelectItem value="change_of_business">Change of Business</SelectItem>
                <SelectItem value="personal_reasons">Personal Reasons</SelectItem>
                <SelectItem value="other">Other</SelectItem>
              </SelectContent>
            </Select>
          </div>
        </div>
        
        <div>
          <Label>Additional Information</Label>
          <Textarea name="additionalInfo" placeholder="Any additional information about the closure..." rows={3} />
        </div>
        
        <div className="p-4 bg-yellow-50 rounded-lg">
          <h4 className="font-semibold text-yellow-800 mb-2">Required Documents</h4>
          <ul className="text-sm text-yellow-700 space-y-1">
            <li>• Valid ID of business owner</li>
            <li>• Business permit (copy)</li>
            <li>• Tax clearance (if applicable)</li>
            <li>• Final financial statement</li>
          </ul>
        </div>
        
        <div className="flex space-x-2">
          <Button type="submit" className="flex-1">Submit Notice</Button>
          <Button type="button" variant="outline" onClick={() => alert('Form saved as draft!')}>Save Draft</Button>
        </div>
        
        <div className="p-4 bg-blue-50 rounded-lg">
          <h4 className="font-semibold text-blue-800 mb-2">Processing Information</h4>
          <ul className="text-sm text-blue-700 space-y-1">
            <li>• Processing time: 3-5 business days</li>
            <li>• Closure certificate will be issued upon completion</li>
            <li>• You will receive notification when ready</li>
            <li>• Bring valid ID when claiming certificate</li>
          </ul>
        </div>
      </form>
    </DialogContent>
  );

  // Business Permit Application Modal
  const BusinessPermitApplicationModal = () => (
    <DialogContent className="max-w-2xl max-h-[80vh] overflow-y-auto" aria-describedby="business-permit-description">
      <DialogHeader>
        <DialogTitle>Business Permit Application</DialogTitle>
        <DialogDescription id="business-permit-description">
          Apply for a new business permit to operate within the barangay.
        </DialogDescription>
      </DialogHeader>
      
      <form className="space-y-4" onSubmit={async (e) => { 
        e.preventDefault(); 
        
        if (!currentUser) {
          toast.error('Please login to submit a request');
          return;
        }
        
        const formData = new FormData(e.target as HTMLFormElement);
        const formObject: Record<string, any> = {};
        formData.forEach((value, key) => {
          formObject[key] = value;
        });
        
        try {
          const newRequest = await db.createDocumentRequest({
            userId: currentUser.id,
            type: 'Business Permit Application',
            applicantName: formObject.applicantName,
            expectedCompletion: new Date(Date.now() + 10*24*60*60*1000).toISOString().split('T')[0],
            formData: formObject
          });
          
          await loadUserData();
          toast.success(`Business Permit Application submitted! Reference: ${newRequest.id}`);
          setModalOpen(false);
        } catch (error: any) {
          toast.error(error.message || 'Failed to submit request');
        }
      }}>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Business Name *</Label>
            <Input name="businessName" placeholder="Enter proposed business name" required />
          </div>
          <div>
            <Label>Business Type *</Label>
            <Select name="businessType" required>
              <SelectTrigger>
                <SelectValue placeholder="Select business type" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="retail">Retail Store</SelectItem>
                <SelectItem value="restaurant">Restaurant/Food Service</SelectItem>
                <SelectItem value="service">Service Business</SelectItem>
                <SelectItem value="manufacturing">Manufacturing</SelectItem>
                <SelectItem value="online">Online Business</SelectItem>
                <SelectItem value="other">Other</SelectItem>
              </SelectContent>
            </Select>
          </div>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Owner Name *</Label>
            <Input name="applicantName" placeholder="Enter full name" required />
          </div>
          <div>
            <Label>Contact Number *</Label>
            <Input name="contactNumber" type="tel" placeholder="+63 XXX XXX XXXX" required />
          </div>
        </div>
        
        <div>
          <Label>Business Address *</Label>
          <Textarea name="businessAddress" placeholder="Complete business address" required />
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Expected Start Date *</Label>
            <Input name="startDate" type="date" required />
          </div>
          <div>
            <Label>Number of Employees</Label>
            <Input name="employeeCount" type="number" placeholder="0" min="0" />
          </div>
        </div>
        
        <div>
          <Label>Business Description *</Label>
          <Textarea name="businessDescription" placeholder="Describe the nature of your business..." rows={3} required />
        </div>
        
        <div className="p-4 bg-green-50 rounded-lg">
          <h4 className="font-semibold text-green-800 mb-2">Required Documents</h4>
          <ul className="text-sm text-green-700 space-y-1">
            <li>• DTI/SEC Registration Certificate</li>
            <li>• Valid ID of business owner</li>
            <li>• Barangay clearance</li>
            <li>• Location clearance/lease contract</li>
            <li>• Fire safety inspection certificate</li>
          </ul>
        </div>
        
        <div className="flex space-x-2">
          <Button type="submit" className="flex-1">Submit Application</Button>
          <Button type="button" variant="outline" onClick={() => alert('Application saved as draft!')}>Save Draft</Button>
        </div>
        
        <div className="p-4 bg-blue-50 rounded-lg">
          <h4 className="font-semibold text-blue-800 mb-2">Processing Information</h4>
          <ul className="text-sm text-blue-700 space-y-1">
            <li>• Processing time: 7-10 business days</li>
            <li>• Processing fee: ₱500.00</li>
            <li>• Inspection may be required</li>
            <li>• Permit valid for 1 year</li>
          </ul>
        </div>
      </form>
    </DialogContent>
  );

  // Business Renewal Form Modal  
  const BusinessRenewalModal = () => (
    <DialogContent className="max-w-2xl max-h-[80vh] overflow-y-auto" aria-describedby="business-renewal-description">
      <DialogHeader>
        <DialogTitle>Business Permit Renewal</DialogTitle>
        <DialogDescription id="business-renewal-description">
          Renew your existing business permit for continued operation.
        </DialogDescription>
      </DialogHeader>
      
      <form className="space-y-4" onSubmit={(e) => { 
        e.preventDefault(); 
        const newForm = {
          id: `BR-2024-${String(submittedForms.length + 1).padStart(3, '0')}`,
          type: 'Business Permit Renewal',
          applicant: (e.target as HTMLFormElement).applicantName.value,
          status: 'Submitted',
          dateSubmitted: new Date().toISOString().split('T')[0],
          expectedCompletion: new Date(Date.now() + 7*24*60*60*1000).toISOString().split('T')[0]
        };
        setSubmittedForms([...submittedForms, newForm]);
        alert(`Business Permit Renewal submitted! Reference: ${newForm.id}`); 
        setModalOpen(false); 
      }}>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Current Permit Number *</Label>
            <Input name="permitNumber" placeholder="BP-2023-XXX" required />
          </div>
          <div>
            <Label>Business Name *</Label>
            <Input name="businessName" placeholder="Current business name" required />
          </div>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Owner Name *</Label>
            <Input name="applicantName" placeholder="Enter full name" required />
          </div>
          <div>
            <Label>Contact Number *</Label>
            <Input name="contactNumber" type="tel" placeholder="+63 XXX XXX XXXX" required />
          </div>
        </div>
        
        <div>
          <Label>Any Changes in Business Information?</Label>
          <Textarea name="changes" placeholder="Describe any changes in business operations, address, etc. (Leave blank if no changes)" rows={3} />
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Current Number of Employees</Label>
            <Input name="employeeCount" type="number" placeholder="0" min="0" />
          </div>
          <div>
            <Label>Annual Gross Sales (Optional)</Label>
            <Input name="grossSales" placeholder="₱ 0.00" />
          </div>
        </div>
        
        <div className="p-4 bg-orange-50 rounded-lg">
          <h4 className="font-semibold text-orange-800 mb-2">Renewal Requirements</h4>
          <ul className="text-sm text-orange-700 space-y-1">
            <li>• Current business permit (copy)</li>
            <li>• Updated DTI/SEC registration</li>
            <li>• Tax clearance</li>
            <li>• Valid ID of business owner</li>
            <li>• Fire safety inspection certificate (if applicable)</li>
          </ul>
        </div>
        
        <div className="flex space-x-2">
          <Button type="submit" className="flex-1">Submit Renewal</Button>
          <Button type="button" variant="outline" onClick={() => alert('Renewal saved as draft!')}>Save Draft</Button>
        </div>
        
        <div className="p-4 bg-blue-50 rounded-lg">
          <h4 className="font-semibold text-blue-800 mb-2">Processing Information</h4>
          <ul className="text-sm text-blue-700 space-y-1">
            <li>• Processing time: 5-7 business days</li>
            <li>• Renewal fee: ₱400.00</li>
            <li>• Late renewal penalty may apply</li>
            <li>• New permit valid for 1 year</li>
          </ul>
        </div>
      </form>
    </DialogContent>
  );

  // Enhanced Document Request Modal
  const DocumentRequestModal = () => (
    <DialogContent className="max-w-2xl max-h-[80vh] overflow-y-auto" aria-describedby="document-request-description">
      <DialogHeader>
        <DialogTitle>Document Request</DialogTitle>
        <DialogDescription id="document-request-description">
          Request official barangay documents and track their processing status.
        </DialogDescription>
      </DialogHeader>
      
      <div className="mb-4 text-center">
        <img 
          src={documentRequestImage}
          alt="Document Request Form"
          className="mx-auto max-w-full h-auto rounded-lg shadow-md"
        />
      </div>
      
      <form className="space-y-4" onSubmit={(e) => { 
        e.preventDefault(); 
        const newForm = {
          id: `DOC-2024-${String(submittedForms.length + 1).padStart(3, '0')}`,
          type: (e.target as HTMLFormElement).documentType.value,
          applicant: (e.target as HTMLFormElement).applicantName.value,
          status: 'Submitted',
          dateSubmitted: new Date().toISOString().split('T')[0],
          expectedCompletion: new Date(Date.now() + 5*24*60*60*1000).toISOString().split('T')[0]
        };
        setSubmittedForms([...submittedForms, newForm]);
        alert(`Document request submitted! Reference: ${newForm.id}`); 
        setModalOpen(false); 
      }}>
        <div>
          <Label>Document Type *</Label>
          <Select name="documentType" required>
            <SelectTrigger>
              <SelectValue placeholder="Select document type" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="Barangay Clearance">Barangay Clearance</SelectItem>
              <SelectItem value="Certificate of Residency">Certificate of Residency</SelectItem>
              <SelectItem value="Certificate of Indigency">Certificate of Indigency</SelectItem>
              <SelectItem value="Business Permit">Business Permit</SelectItem>
              <SelectItem value="Certificate of Employment">Certificate of Employment</SelectItem>
              <SelectItem value="First Time Job Seeker">First Time Job Seeker Certificate</SelectItem>
            </SelectContent>
          </Select>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Applicant Name *</Label>
            <Input name="applicantName" placeholder="Enter full name" required />
          </div>
          <div>
            <Label>Contact Number *</Label>
            <Input name="contactNumber" type="tel" placeholder="+63 XXX XXX XXXX" required />
          </div>
        </div>
        
        <div>
          <Label>Purpose *</Label>
          <Input name="purpose" placeholder="Purpose of the document" required />
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <Label>Preferred Pickup Date *</Label>
            <Input name="pickupDate" type="date" required />
          </div>
          <div>
            <Label>Number of Copies</Label>
            <Input name="copies" type="number" min="1" defaultValue="1" />
          </div>
        </div>
        
        <div>
          <Label>Additional Requirements</Label>
          <Textarea name="additionalReq" placeholder="Any special requirements or notes..." rows={2} />
        </div>
        
        <div className="flex space-x-2">
          <Button type="submit" className="flex-1">Submit Request</Button>
          <Button type="button" variant="outline" onClick={() => alert('Request saved as draft!')}>Save Draft</Button>
        </div>
        
        <div className="p-4 bg-blue-50 rounded-lg">
          <h4 className="font-semibold text-blue-800 mb-2">Processing Information</h4>
          <ul className="text-sm text-blue-700 space-y-1">
            <li>• Processing time: 3-5 business days</li>
            <li>• You will receive SMS/email updates</li>
            <li>• Bring valid ID when picking up</li>
            <li>• Processing fees apply</li>
          </ul>
        </div>
      </form>
    </DialogContent>
  );

  // Form Status Tracking Modal
  const FormStatusModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="form-status-description">
      <DialogHeader>
        <DialogTitle>Form Status Tracking</DialogTitle>
        <DialogDescription id="form-status-description">
          Track the status of your submitted forms and applications.
        </DialogDescription>
      </DialogHeader>
      
      <div className="space-y-4">
        <div className="flex justify-between items-center">
          <h3 className="text-lg font-semibold">Your Submitted Forms</h3>
          <Button onClick={() => alert('Refreshing status data...')}>Refresh Status</Button>
        </div>
        
        <div className="space-y-3">
          {submittedForms.map((form, index) => (
            <div key={index} className="border rounded-lg p-4">
              <div className="flex justify-between items-start mb-2">
                <div>
                  <h4 className="font-semibold">{form.type}</h4>
                  <p className="text-sm text-gray-600">Reference: {form.id}</p>
                  <p className="text-sm text-gray-600">Applicant: {form.applicant}</p>
                </div>
                <Badge className={
                  form.status === 'Completed' ? 'bg-green-100 text-green-800' :
                  form.status === 'Processing' ? 'bg-orange-100 text-orange-800' :
                  'bg-blue-100 text-blue-800'
                }>
                  {form.status}
                </Badge>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                  <span className="font-medium">Date Submitted:</span> {form.dateSubmitted}
                </div>
                <div>
                  <span className="font-medium">Expected Completion:</span> {form.expectedCompletion}
                </div>
              </div>
              
              <div className="mt-3 flex space-x-2">
                <Button variant="outline" size="sm" onClick={() => alert(`Viewing detailed information for ${form.id}...`)}>
                  View Details
                </Button>
                {form.status === 'Completed' && (
                  <Button variant="outline" size="sm" onClick={() => alert(`Downloading document for ${form.id}...`)}>
                    Download
                  </Button>
                )}
                {form.status === 'Processing' && (
                  <Button variant="outline" size="sm" onClick={() => alert(`Updating application ${form.id}...`)}>
                    Update Application
                  </Button>
                )}
              </div>
            </div>
          ))}
        </div>
        
        {submittedForms.length === 0 && (
          <div className="text-center py-8 text-gray-500">
            <FileText className="w-12 h-12 mx-auto mb-2 text-gray-300" />
            <p>No forms submitted yet</p>
            <p className="text-sm">Submit a form to track its status here</p>
          </div>
        )}
      </div>
    </DialogContent>
  );

  const PaymentsModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="payments-description">
      <DialogHeader>
        <DialogTitle>Online Payments</DialogTitle>
        <DialogDescription id="payments-description">
          Pay your barangay fees and taxes securely online.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4">
        <div className="border border-gray-200 rounded-lg p-4">
          <h3 className="font-semibold mb-2">Community Tax</h3>
          <p className="text-sm text-gray-600 mb-3">Annual community tax payment</p>
          <div className="flex justify-between items-center">
            <span className="font-bold text-lg">₱50.00</span>
            <Button className="bg-green-600 hover:bg-green-700" onClick={() => { alert('Payment of ₱50.00 for Community Tax processed successfully!'); setModalOpen(false); }}>
              Pay Now
            </Button>
          </div>
        </div>
        <div className="border border-gray-200 rounded-lg p-4">
          <h3 className="font-semibold mb-2">Business Permit Fee</h3>
          <p className="text-sm text-gray-600 mb-3">Annual business permit renewal</p>
          <div className="flex justify-between items-center">
            <span className="font-bold text-lg">₱500.00</span>
            <Button className="bg-green-600 hover:bg-green-700" onClick={() => { alert('Payment of ₱500.00 for Business Permit processed successfully!'); setModalOpen(false); }}>
              Pay Now
            </Button>
          </div>
        </div>
        <div className="border border-gray-200 rounded-lg p-4">
          <h3 className="font-semibold mb-2">Barangay Clearance Fee</h3>
          <p className="text-sm text-gray-600 mb-3">Document processing fee</p>
          <div className="flex justify-between items-center">
            <span className="font-bold text-lg">₱30.00</span>
            <Button className="bg-green-600 hover:bg-green-700" onClick={() => { alert('Payment of ₱30.00 for Clearance Fee processed successfully!'); setModalOpen(false); }}>
              Pay Now
            </Button>
          </div>
        </div>
      </div>
    </DialogContent>
  );

  const ReportIssuesModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="report-issues-description">
      <DialogHeader>
        <DialogTitle>Report Issues</DialogTitle>
        <DialogDescription id="report-issues-description">
          Report community issues, incidents, or complaints for prompt resolution.
        </DialogDescription>
      </DialogHeader>
      <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); alert('Issue report submitted! Reference: IR-2024-001'); setModalOpen(false); }}>
        <div>
          <Label>Issue Type</Label>
          <Select required>
            <SelectTrigger>
              <SelectValue placeholder="Select issue type" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="road_damage">Road Damage</SelectItem>
              <SelectItem value="street_light">Street Light</SelectItem>
              <SelectItem value="noise_complaint">Noise Complaint</SelectItem>
              <SelectItem value="garbage_collection">Garbage Collection</SelectItem>
              <SelectItem value="water_supply">Water Supply</SelectItem>
              <SelectItem value="other">Other</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div>
          <Label>Location</Label>
          <Input placeholder="Street address or landmark" required />
        </div>
        <div>
          <Label>Description</Label>
          <Textarea placeholder="Describe the issue in detail..." required />
        </div>
        <Button type="submit" className="w-full">Submit Report</Button>
      </form>
    </DialogContent>
  );

  const FacilityBookingModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="facility-booking-description">
      <DialogHeader>
        <DialogTitle>Facility Booking</DialogTitle>
        <DialogDescription id="facility-booking-description">
          Reserve community facilities for events and activities.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4">
        <div className="border border-gray-200 rounded-lg p-4">
          <h3 className="font-semibold mb-2">Community Hall</h3>
          <p className="text-sm text-gray-600 mb-3">Capacity: 200 people • Air-conditioned</p>
          <div className="flex justify-between items-center">
            <span className="text-sm text-gray-500">₱500/day</span>
            <Button className="bg-purple-600 hover:bg-purple-700" onClick={() => { alert('Community Hall booking initiated! You will be contacted for confirmation.'); setModalOpen(false); }}>
              Book Now
            </Button>
          </div>
        </div>
        <div className="border border-gray-200 rounded-lg p-4">
          <h3 className="font-semibold mb-2">Basketball Court</h3>
          <p className="text-sm text-gray-600 mb-3">Available 6AM-10PM • Covered court</p>
          <div className="flex justify-between items-center">
            <span className="text-sm text-gray-500">₱200/hour</span>
            <Button className="bg-purple-600 hover:bg-purple-700" onClick={() => { alert('Basketball Court booking initiated! You will be contacted for confirmation.'); setModalOpen(false); }}>
              Book Now
            </Button>
          </div>
        </div>
      </div>
    </DialogContent>
  );

  const AnnouncementsModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="announcements-description">
      <DialogHeader>
        <DialogTitle>All Announcements</DialogTitle>
        <DialogDescription id="announcements-description">
          View all official barangay announcements and updates.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4 max-h-96 overflow-y-auto">
        <div className="border-l-4 border-red-500 pl-4 py-3 bg-red-50 rounded-r-lg">
          <h4 className="font-semibold text-red-800">Emergency Alert</h4>
          <p className="text-red-700 text-sm mt-1">Typhoon warning: Prepare emergency kits and evacuation plans.</p>
          <span className="text-xs text-red-600">30 minutes ago</span>
        </div>
        <div className="border-l-4 border-blue-500 pl-4 py-3 bg-blue-50 rounded-r-lg">
          <h4 className="font-semibold text-blue-800">Community Health Program</h4>
          <p className="text-blue-700 text-sm mt-1">Free health checkup and vaccination drive this Saturday at the Barangay Hall.</p>
          <span className="text-xs text-blue-600">2 hours ago</span>
        </div>
        <div className="border-l-4 border-green-500 pl-4 py-3 bg-green-50 rounded-r-lg">
          <h4 className="font-semibold text-green-800">Digital Voting System Launch</h4>
          <p className="text-green-700 text-sm mt-1">New digital voting platform now available for community polls and surveys.</p>
          <span className="text-xs text-green-600">1 day ago</span>
        </div>
        <div className="border-l-4 border-yellow-500 pl-4 py-3 bg-yellow-50 rounded-r-lg">
          <h4 className="font-semibold text-yellow-800">Multi-language Support Added</h4>
          <p className="text-yellow-700 text-sm mt-1">Barangayan app now supports Cebuano, Tagalog, and English languages.</p>
          <span className="text-xs text-yellow-600">3 days ago</span>
        </div>
      </div>
    </DialogContent>
  );

  const EventCalendarModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="event-calendar-description">
      <DialogHeader>
        <DialogTitle>Event Calendar</DialogTitle>
        <DialogDescription id="event-calendar-description">
          Browse and register for upcoming community events and programs.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4">
        <div className="border border-gray-200 rounded-lg p-4">
          <h4 className="font-semibold mb-2">Health & Wellness Fair</h4>
          <p className="text-sm text-gray-600 mb-2">Free health checkups and vaccinations</p>
          <p className="text-xs text-gray-500 mb-3">March 16, 2024 • 8:00 AM - 5:00 PM</p>
          <Button onClick={() => { alert('Registration for Health & Wellness Fair successful!'); setModalOpen(false); }}>
            Register Now
          </Button>
        </div>
        <div className="border border-gray-200 rounded-lg p-4">
          <h4 className="font-semibold mb-2">Digital Literacy Workshop</h4>
          <p className="text-sm text-gray-600 mb-2">Learn to use smartphones and digital services</p>
          <p className="text-xs text-gray-500 mb-3">March 22, 2024 • 2:00 PM - 5:00 PM</p>
          <Button onClick={() => { alert('Registration for Digital Literacy Workshop successful!'); setModalOpen(false); }}>
            Register Now
          </Button>
        </div>
      </div>
    </DialogContent>
  );

  const FeedbackModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="feedback-description">
      <DialogHeader>
        <DialogTitle>Feedback System</DialogTitle>
        <DialogDescription id="feedback-description">
          Share your suggestions, complaints, or feedback to help us improve our services.
        </DialogDescription>
      </DialogHeader>
      <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); alert('Thank you for your feedback! Your input helps us improve.'); setModalOpen(false); }}>
        <div>
          <Label>Feedback Type</Label>
          <Select required>
            <SelectTrigger>
              <SelectValue placeholder="Select feedback type" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="suggestion">Suggestion</SelectItem>
              <SelectItem value="complaint">Complaint</SelectItem>
              <SelectItem value="compliment">Compliment</SelectItem>
              <SelectItem value="feature_request">Feature Request</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div>
          <Label>Your Feedback</Label>
          <Textarea placeholder="Share your thoughts..." required />
        </div>
        <Button type="submit" className="w-full">Submit Feedback</Button>
      </form>
    </DialogContent>
  );

  const EmergencyServicesModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="emergency-services-description">
      <DialogHeader>
        <DialogTitle>Emergency Services</DialogTitle>
        <DialogDescription id="emergency-services-description">
          Quick access to emergency contacts and important safety information.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4">
        <Button className="w-full flex items-center justify-between bg-red-600 hover:bg-red-700 text-white p-3" onClick={() => { alert('Calling Fire Department at 116...'); setModalOpen(false); }}>
          <div className="flex items-center">
            <Car className="mr-3" />
            <span>Fire Department</span>
          </div>
          <span className="text-sm">116</span>
        </Button>
        
        <Button className="w-full flex items-center justify-between bg-blue-600 hover:bg-blue-700 text-white p-3" onClick={() => { alert('Calling Police Station at 117...'); setModalOpen(false); }}>
          <div className="flex items-center">
            <Shield className="mr-3" />
            <span>Police Station</span>
          </div>
          <span className="text-sm">117</span>
        </Button>
        
        <Button className="w-full flex items-center justify-between bg-green-600 hover:bg-green-700 text-white p-3" onClick={() => { alert('Calling Medical Emergency at 911...'); setModalOpen(false); }}>
          <div className="flex items-center">
            <Car className="mr-3" />
            <span>Medical Emergency</span>
          </div>
          <span className="text-sm">911</span>
        </Button>
      </div>
      <div className="mt-6 p-4 bg-red-50 rounded-lg">
        <h3 className="font-semibold text-red-800 mb-2">Emergency Guidelines</h3>
        <ul className="text-sm text-red-700 space-y-1">
          <li>• Stay calm and provide clear information</li>
          <li>• Give exact location and nature of emergency</li>
          <li>• Follow dispatcher instructions</li>
          <li>• Keep phone line open if requested</li>
        </ul>
      </div>
    </DialogContent>
  );

  const ProfileModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="profile-description">
      <DialogHeader>
        <DialogTitle>Profile Management</DialogTitle>
        <DialogDescription id="profile-description">
          Update your personal information and account details.
        </DialogDescription>
      </DialogHeader>
      <div className="text-center mb-6">
        <div className="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <UserCircle className="w-12 h-12 text-blue-600" />
        </div>
        <h3 className="font-semibold">Juan Dela Cruz</h3>
        <p className="text-sm text-gray-600">Resident ID: 2024-001</p>
      </div>
      <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); alert('Profile updated successfully!'); setModalOpen(false); }}>
        <div className="grid grid-cols-2 gap-4">
          <div>
            <Label>First Name</Label>
            <Input defaultValue="Juan" />
          </div>
          <div>
            <Label>Last Name</Label>
            <Input defaultValue="Dela Cruz" />
          </div>
        </div>
        <div>
          <Label>Email</Label>
          <Input type="email" defaultValue="juan@email.com" />
        </div>
        <div>
          <Label>Contact Number</Label>
          <Input defaultValue="+63 912 345 6789" />
        </div>
        <Button type="submit" className="w-full">Update Profile</Button>
      </form>
    </DialogContent>
  );

  const TourismModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="tourism-description">
      <DialogHeader>
        <DialogTitle>Cebu Tourism - Tourist Attractions</DialogTitle>
        <DialogDescription id="tourism-description">
          Discover the beautiful tourist attractions and destinations in Cebu.
        </DialogDescription>
      </DialogHeader>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <Card>
          <CardContent className="p-4">
            <div className="aspect-video bg-blue-100 rounded-lg mb-3 flex items-center justify-center">
              <Mountain className="w-8 h-8 text-blue-600" />
            </div>
            <h3 className="font-semibold mb-2">Temple of Leah</h3>
            <p className="text-sm text-gray-600 mb-2">A beautiful Roman-inspired temple dedicated to love and featuring stunning architecture.</p>
            <Badge className="text-xs">Historical Site</Badge>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-4">
            <div className="aspect-video bg-green-100 rounded-lg mb-3 flex items-center justify-center">
              <Camera className="w-8 h-8 text-green-600" />
            </div>
            <h3 className="font-semibold mb-2">Magellan's Cross</h3>
            <p className="text-sm text-gray-600 mb-2">Historic landmark marking the arrival of Christianity in the Philippines.</p>
            <Badge className="text-xs bg-green-600">Heritage Site</Badge>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-4">
            <div className="aspect-video bg-purple-100 rounded-lg mb-3 flex items-center justify-center">
              <Building className="w-8 h-8 text-purple-600" />
            </div>
            <h3 className="font-semibold mb-2">Basilica del Santo Niño</h3>
            <p className="text-sm text-gray-600 mb-2">The oldest Roman Catholic church in the Philippines, housing the original image of Santo Niño.</p>
            <Badge className="text-xs bg-purple-600">Religious Site</Badge>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-4">
            <div className="aspect-video bg-orange-100 rounded-lg mb-3 flex items-center justify-center">
              <Mountain className="w-8 h-8 text-orange-600" />
            </div>
            <h3 className="font-semibold mb-2">Fort San Pedro</h3>
            <p className="text-sm text-gray-600 mb-2">A triangular fort built by Spanish conquistadors as defense against Muslim raids.</p>
            <Badge className="text-xs bg-orange-600">Fort</Badge>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-4">
            <div className="aspect-video bg-blue-100 rounded-lg mb-3 flex items-center justify-center">
              <Camera className="w-8 h-8 text-blue-600" />
            </div>
            <h3 className="font-semibold mb-2">Kawasan Falls</h3>
            <p className="text-sm text-gray-600 mb-2">Multi-tiered waterfalls perfect for swimming and canyoneering adventures.</p>
            <Badge className="text-xs">Natural Wonder</Badge>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-4">
            <div className="aspect-video bg-teal-100 rounded-lg mb-3 flex items-center justify-center">
              <Mountain className="w-8 h-8 text-teal-600" />
            </div>
            <h3 className="font-semibold mb-2">Oslob Whale Sharks</h3>
            <p className="text-sm text-gray-600 mb-2">World-famous destination for swimming with gentle whale sharks.</p>
            <Badge className="text-xs bg-teal-600">Marine Life</Badge>
          </CardContent>
        </Card>
      </div>
      <div className="mt-6 p-4 bg-blue-50 rounded-lg">
        <h4 className="font-semibold text-blue-800 mb-2">Tourism Information</h4>
        <ul className="text-sm text-blue-700 space-y-1">
          <li>• Best time to visit: December to May (dry season)</li>
          <li>• Local currency: Philippine Peso (PHP)</li>
          <li>• Languages: Cebuano, English, Filipino</li>
          <li>• Emergency hotline: 117 (Police), 116 (Fire), 911 (Medical)</li>
        </ul>
      </div>
    </DialogContent>
  );

  const SearchModal = () => (
    <DialogContent className="max-w-2xl" aria-describedby="search-description">
      <DialogHeader>
        <DialogTitle>Search Barangayan Services</DialogTitle>
        <DialogDescription id="search-description">
          Find services, documents, announcements, and information quickly.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-4">
        <div className="relative">
          <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
          <Input 
            placeholder="Search for services, documents, or information..." 
            className="pl-10"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
          />
        </div>
        {searchQuery && (
          <div className="space-y-2 max-h-64 overflow-y-auto">
            <div className="p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onClick={() => { showModal(<DocumentRequestModal />); }}>
              <h4 className="font-semibold">Document Request</h4>
              <p className="text-sm text-gray-600">Request barangay clearance, certificates, and permits</p>
            </div>
            <div className="p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onClick={() => { showModal(<PaymentsModal />); }}>
              <h4 className="font-semibold">Online Payments</h4>
              <p className="text-sm text-gray-600">Pay community tax, business permits, and fees</p>
            </div>
            <div className="p-3 border rounded-lg cursor-pointer hover:bg-gray-50" onClick={() => { showModal(<EmergencyServicesModal />); }}>
              <h4 className="font-semibold">Emergency Services</h4>
              <p className="text-sm text-gray-600">Quick access to emergency contacts and safety information</p>
            </div>
          </div>
        )}
        {!searchQuery && (
          <div className="text-center text-gray-500 py-8">
            <Search className="w-12 h-12 mx-auto mb-2 text-gray-300" />
            <p>Start typing to search for services and information</p>
          </div>
        )}
      </div>
    </DialogContent>
  );

  const TransparencyModal = () => (
    <DialogContent className="max-w-3xl max-h-[80vh] overflow-y-auto" aria-describedby="transparency-description">
      <DialogHeader>
        <DialogTitle>Transparency Portal</DialogTitle>
        <DialogDescription id="transparency-description">
          Access public information, financial reports, and government transparency data.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center text-lg">
                <Eye className="mr-2 w-5 h-5" />
                Financial Reports
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-2">
              <Button variant="outline" className="w-full justify-start">2024 Q1 Budget Report</Button>
              <Button variant="outline" className="w-full justify-start">2023 Annual Financial Statement</Button>
              <Button variant="outline" className="w-full justify-start">Procurement Records</Button>
            </CardContent>
          </Card>
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center text-lg">
                <FileText className="mr-2 w-5 h-5" />
                Public Documents
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-2">
              <Button variant="outline" className="w-full justify-start">Barangay Ordinances</Button>
              <Button variant="outline" className="w-full justify-start">Meeting Minutes</Button>
              <Button variant="outline" className="w-full justify-start">Project Updates</Button>
            </CardContent>
          </Card>
        </div>
        <div className="p-4 bg-blue-50 rounded-lg">
          <h4 className="font-semibold text-blue-800 mb-2">Freedom of Information</h4>
          <p className="text-blue-700 text-sm mb-3">
            Citizens have the right to access public information. Submit a formal request for specific documents or data.
          </p>
          <Button className="bg-blue-600 hover:bg-blue-700">Submit FOI Request</Button>
        </div>
      </div>
    </DialogContent>
  );

  const CareersModal = () => (
    <DialogContent className="max-w-3xl max-h-[80vh] overflow-y-auto" aria-describedby="careers-description">
      <DialogHeader>
        <DialogTitle>Career Opportunities</DialogTitle>
        <DialogDescription id="careers-description">
          Join our team and serve the community. Current openings and volunteer opportunities.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center">
                <Briefcase className="mr-2 w-5 h-5" />
                Current Openings
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-3">
              <div className="border-l-4 border-green-500 pl-3">
                <h4 className="font-semibold">IT Support Specialist</h4>
                <p className="text-sm text-gray-600">Full-time • ₱25,000 - ₱35,000</p>
                <p className="text-xs text-gray-500">Posted: 2 days ago</p>
              </div>
              <div className="border-l-4 border-blue-500 pl-3">
                <h4 className="font-semibold">Community Development Officer</h4>
                <p className="text-sm text-gray-600">Full-time • ₱30,000 - ₱40,000</p>
                <p className="text-xs text-gray-500">Posted: 1 week ago</p>
              </div>
              <div className="border-l-4 border-purple-500 pl-3">
                <h4 className="font-semibold">Administrative Assistant</h4>
                <p className="text-sm text-gray-600">Part-time • ₱15,000 - ₱20,000</p>
                <p className="text-xs text-gray-500">Posted: 3 days ago</p>
              </div>
            </CardContent>
          </Card>
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center">
                <Users className="mr-2 w-5 h-5" />
                Volunteer Programs
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-3">
              <div className="border-l-4 border-orange-500 pl-3">
                <h4 className="font-semibold">Community Health Volunteer</h4>
                <p className="text-sm text-gray-600">Healthcare support and education</p>
                <p className="text-xs text-gray-500">Flexible schedule</p>
              </div>
              <div className="border-l-4 border-teal-500 pl-3">
                <h4 className="font-semibold">Digital Literacy Instructor</h4>
                <p className="text-sm text-gray-600">Teach seniors and residents tech skills</p>
                <p className="text-xs text-gray-500">Weekends</p>
              </div>
              <div className="border-l-4 border-red-500 pl-3">
                <h4 className="font-semibold">Emergency Response Team</h4>
                <p className="text-sm text-gray-600">Disaster preparedness and response</p>
                <p className="text-xs text-gray-500">Training provided</p>
              </div>
            </CardContent>
          </Card>
        </div>
        <div className="p-4 bg-green-50 rounded-lg">
          <h4 className="font-semibold text-green-800 mb-2">How to Apply</h4>
          <ul className="text-sm text-green-700 space-y-1">
            <li>• Submit application through our online portal</li>
            <li>• Include updated resume and cover letter</li>
            <li>• Provide relevant certifications and references</li>
            <li>• Applications are reviewed within 5-7 business days</li>
          </ul>
          <Button className="mt-3 bg-green-600 hover:bg-green-700">Apply Now</Button>
        </div>
      </div>
    </DialogContent>
  );

  const PrivacyPolicyModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="privacy-policy-description">
      <DialogHeader>
        <DialogTitle>Privacy Policy</DialogTitle>
        <DialogDescription id="privacy-policy-description">
          Learn how we collect, use, and protect your personal information.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6 text-sm">
        <section>
          <h3 className="font-semibold text-lg mb-3">Information We Collect</h3>
          <ul className="space-y-2 text-gray-600">
            <li>• Personal identification information (name, address, contact details)</li>
            <li>• Document requests and service applications</li>
            <li>• Payment information (securely processed)</li>
            <li>• Usage data and system logs</li>
          </ul>
        </section>
        <section>
          <h3 className="font-semibold text-lg mb-3">How We Use Your Information</h3>
          <ul className="space-y-2 text-gray-600">
            <li>• Processing service requests and applications</li>
            <li>• Communicating important updates and notifications</li>
            <li>• Improving our services and system functionality</li>
            <li>• Ensuring security and preventing fraud</li>
          </ul>
        </section>
        <section>
          <h3 className="font-semibold text-lg mb-3">Data Protection</h3>
          <ul className="space-y-2 text-gray-600">
            <li>• SSL encryption for all data transmissions</li>
            <li>• Regular security audits and updates</li>
            <li>• Limited access to authorized personnel only</li>
            <li>• Compliance with Data Privacy Act of 2012</li>
          </ul>
        </section>
        <section>
          <h3 className="font-semibold text-lg mb-3">Your Rights</h3>
          <ul className="space-y-2 text-gray-600">
            <li>• Access and review your personal data</li>
            <li>• Request corrections or updates</li>
            <li>• Request deletion of your data</li>
            <li>• Withdraw consent for data processing</li>
          </ul>
        </section>
        <div className="p-4 bg-blue-50 rounded-lg">
          <h4 className="font-semibold text-blue-800 mb-2">Contact Us</h4>
          <p className="text-blue-700 text-sm">
            For privacy concerns or data requests, contact our Data Protection Officer at privacy@barangayan.gov or visit our office during business hours.
          </p>
        </div>
      </div>
    </DialogContent>
  );

  const EServicesModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="e-services-description">
      <DialogHeader>
        <DialogTitle>Electronic Services Portal</DialogTitle>
        <DialogDescription id="e-services-description">
          Access all digital government services and online transactions.
        </DialogDescription>
      </DialogHeader>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <Button variant="outline" className="h-auto p-4 flex flex-col items-center space-y-2" onClick={() => showModal(<DocumentRequestModal />)}>
          <FileText className="w-8 h-8 text-blue-600" />
          <span className="font-semibold">Document Services</span>
          <span className="text-xs text-gray-500">Certificates & Permits</span>
        </Button>
        <Button variant="outline" className="h-auto p-4 flex flex-col items-center space-y-2" onClick={() => showModal(<PaymentsModal />)}>
          <CreditCard className="w-8 h-8 text-green-600" />
          <span className="font-semibold">Payment Portal</span>
          <span className="text-xs text-gray-500">Taxes & Fees</span>
        </Button>
        <Button variant="outline" className="h-auto p-4 flex flex-col items-center space-y-2" onClick={() => showModal(<FacilityBookingModal />)}>
          <Building className="w-8 h-8 text-purple-600" />
          <span className="font-semibold">Facility Booking</span>
          <span className="text-xs text-gray-500">Reserve Venues</span>
        </Button>
        <Button variant="outline" className="h-auto p-4 flex flex-col items-center space-y-2" onClick={() => showModal(<ReportIssuesModal />)}>
          <AlertTriangle className="w-8 h-8 text-red-600" />
          <span className="font-semibold">Report Issues</span>
          <span className="text-xs text-gray-500">Community Problems</span>
        </Button>
        <Button variant="outline" className="h-auto p-4 flex flex-col items-center space-y-2" onClick={() => showModal(<ProfileModal />)}>
          <UserCircle className="w-8 h-8 text-indigo-600" />
          <span className="font-semibold">Profile Management</span>
          <span className="text-xs text-gray-500">Account Settings</span>
        </Button>
        <Button variant="outline" className="h-auto p-4 flex flex-col items-center space-y-2" onClick={() => alert('Business registration system launching soon! Submit applications and track business permits online.')}>
          <Briefcase className="w-8 h-8 text-orange-600" />
          <span className="font-semibold">Business Registration</span>
          <span className="text-xs text-gray-500">Permits & License</span>
        </Button>
      </div>
    </DialogContent>
  );

  const MFormsModal = () => (
    <DialogContent className="max-w-6xl max-h-[90vh] overflow-y-auto" aria-describedby="m-forms-description">
      <DialogHeader>
        <DialogTitle>Mobile Forms (M-Forms)</DialogTitle>
        <DialogDescription id="m-forms-description">
          Quick access to commonly used forms and applications. Fill out forms digitally and track their status.
        </DialogDescription>
      </DialogHeader>
      
      {/* Forms Layout Image */}
      <div className="mb-6 text-center">
        <img 
          src={formsLayoutImage}
          alt="Forms Layout"
          className="mx-auto max-w-full h-auto rounded-lg shadow-lg"
        />
      </div>
      
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {/* Left Column - Forms Categories */}
        <div className="space-y-6">
          <Card>
            <CardHeader className="bg-blue-50">
              <CardTitle className="flex items-center text-blue-800">
                <Briefcase className="mr-2 w-5 h-5" />
                Business Forms
              </CardTitle>
            </CardHeader>
            <CardContent className="p-4 space-y-3">
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<BusinessPermitApplicationModal />)}
              >
                <FileText className="mr-3 w-5 h-5 text-blue-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Business Permit Application</div>
                  <div className="text-xs text-gray-500 truncate">Apply for new business permits</div>
                </div>
              </Button>
              
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<BusinessRenewalModal />)}
              >
                <FileText className="mr-3 w-5 h-5 text-green-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Business Renewal Form</div>
                  <div className="text-xs text-gray-500 truncate">Renew existing business permits</div>
                </div>
              </Button>
              
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<BusinessClosureModal />)}
              >
                <FileText className="mr-3 w-5 h-5 text-red-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Business Closure Notice</div>
                  <div className="text-xs text-gray-500 truncate">Notify business closure</div>
                </div>
              </Button>
            </CardContent>
          </Card>
          
          <Card>
            <CardHeader className="bg-orange-50">
              <CardTitle className="flex items-center text-orange-800">
                <Users className="mr-2 w-5 h-5" />
                Community Forms
              </CardTitle>
            </CardHeader>
            <CardContent className="p-4 space-y-3">
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<ReportIssuesModal />)}
              >
                <AlertTriangle className="mr-3 w-5 h-5 text-red-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Incident Report Form</div>
                  <div className="text-xs text-gray-500 truncate">Report incidents and issues</div>
                </div>
              </Button>
              
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<FeedbackModal />)}
              >
                <MessageSquare className="mr-3 w-5 h-5 text-indigo-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Community Feedback Form</div>
                  <div className="text-xs text-gray-500 truncate">Share feedback and suggestions</div>
                </div>
              </Button>
              
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => alert('Volunteer registration form now available! Join community programs and initiatives.')}
              >
                <Users className="mr-3 w-5 h-5 text-teal-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Volunteer Registration</div>
                  <div className="text-xs text-gray-500 truncate">Join community programs</div>
                </div>
              </Button>
            </CardContent>
          </Card>
          
          <Card>
            <CardHeader className="bg-red-50">
              <CardTitle className="flex items-center text-red-800">
                <Car className="mr-2 w-5 h-5" />
                Emergency Forms
              </CardTitle>
            </CardHeader>
            <CardContent className="p-4 space-y-3">
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => alert('Emergency assistance request form ready! Get help during emergencies quickly.')}
              >
                <Car className="mr-3 w-5 h-5 text-red-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Emergency Assistance Request</div>
                  <div className="text-xs text-gray-500 truncate">Request emergency help</div>
                </div>
              </Button>
              
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => alert('Medical assistance form available! Request medical help and emergency healthcare.')}
              >
                <Shield className="mr-3 w-5 h-5 text-purple-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Medical Assistance Form</div>
                  <div className="text-xs text-gray-500 truncate">Request medical assistance</div>
                </div>
              </Button>
            </CardContent>
          </Card>
        </div>
        
        {/* Right Column - Document Requests & Status */}
        <div className="space-y-6">
          <Card>
            <CardHeader className="bg-green-50">
              <CardTitle className="flex items-center text-green-800">
                <FileText className="mr-2 w-5 h-5" />
                Document Requests
              </CardTitle>
            </CardHeader>
            <CardContent className="p-4 space-y-3">
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<DocumentRequestModal />)}
              >
                <FileText className="mr-3 w-5 h-5 text-blue-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Document Request</div>
                  <div className="text-xs text-gray-500 truncate">Request official documents</div>
                </div>
              </Button>
              
              <Button 
                variant="outline" 
                className="w-full justify-start h-auto p-3 text-left" 
                onClick={() => showModal(<FormStatusModal />)}
              >
                <Eye className="mr-3 w-5 h-5 text-purple-600 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm">Track Form Status</div>
                  <div className="text-xs text-gray-500 truncate">Check application status</div>
                </div>
              </Button>
            </CardContent>
          </Card>
          
          <Card>
            <CardHeader>
              <CardTitle className="text-lg">Quick Statistics</CardTitle>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div className="text-center p-3 bg-blue-50 rounded-lg">
                  <div className="text-2xl font-bold text-blue-600">{submittedForms.length}</div>
                  <div className="text-xs text-blue-600">Submitted Forms</div>
                </div>
                <div className="text-center p-3 bg-green-50 rounded-lg">
                  <div className="text-2xl font-bold text-green-600">
                    {submittedForms.filter(f => f.status === 'Completed').length}
                  </div>
                  <div className="text-xs text-green-600">Completed</div>
                </div>
              </div>
              
              <div className="space-y-2">
                <h4 className="font-semibold text-sm">Recent Submissions</h4>
                {submittedForms.slice(-3).map((form, index) => (
                  <div key={index} className="flex justify-between items-center p-2 bg-gray-50 rounded text-xs">
                    <span className="truncate">{form.type}</span>
                    <Badge className={
                      form.status === 'Completed' ? 'bg-green-100 text-green-800' :
                      form.status === 'Processing' ? 'bg-orange-100 text-orange-800' :
                      'bg-blue-100 text-blue-800'
                    } size="sm">
                      {form.status}
                    </Badge>
                  </div>
                ))}
                
                {submittedForms.length === 0 && (
                  <p className="text-xs text-gray-500 text-center py-4">No forms submitted yet</p>
                )}
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
      
      <div className="mt-6 p-4 bg-blue-50 rounded-lg">
        <h4 className="font-semibold text-blue-800 mb-2 flex items-center">
          <Info className="mr-2 w-4 h-4" />
          How to Use M-Forms
        </h4>
        <ul className="text-sm text-blue-700 space-y-1">
          <li>• Select the appropriate form category above</li>
          <li>• Fill out all required fields completely</li>
          <li>• Submit your form and receive a reference number</li>
          <li>• Track your application status using the reference number</li>
          <li>• Receive notifications when your request is ready</li>
        </ul>
      </div>
    </DialogContent>
  );

  const EmployeePortalModal = () => (
    <DialogContent className="max-w-lg" aria-describedby="employee-portal-description">
      <DialogHeader>
        <DialogTitle>Employee Portal Access</DialogTitle>
        <DialogDescription id="employee-portal-description">
          Secure login portal for barangay employees and staff members.
        </DialogDescription>
      </DialogHeader>
      <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); alert('Employee portal access granted! Welcome to the internal system.'); setModalOpen(false); }}>
        <div>
          <Label>Employee ID</Label>
          <Input placeholder="Enter your employee ID" required />
        </div>
        <div>
          <Label>Password</Label>
          <Input type="password" placeholder="Enter your password" required />
        </div>
        <div>
          <Label>Department</Label>
          <Select required>
            <SelectTrigger>
              <SelectValue placeholder="Select your department" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="admin">Administration</SelectItem>
              <SelectItem value="health">Health Services</SelectItem>
              <SelectItem value="social">Social Services</SelectItem>
              <SelectItem value="peace">Peace & Order</SelectItem>
              <SelectItem value="environment">Environmental Management</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <Button type="submit" className="w-full">Access Portal</Button>
        <div className="text-center">
          <Button variant="link" className="text-sm">Forgot Password?</Button>
        </div>
      </form>
      <div className="mt-4 p-3 bg-yellow-50 rounded-lg">
        <p className="text-sm text-yellow-800">
          <Shield className="inline w-4 h-4 mr-1" />
          For authorized personnel only. All activities are logged and monitored.
        </p>
      </div>
    </DialogContent>
  );

  // Resident Database Modal
  const ResidentDatabaseModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="resident-database-description">
      <DialogHeader>
        <DialogTitle>Resident Database Management</DialogTitle>
        <DialogDescription id="resident-database-description">
          Manage resident records, update information, and track barangay population data.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-base">Total Residents</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-blue-600">1,247</div>
              <p className="text-xs text-gray-500">+23 this month</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-base">Active Voters</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-green-600">892</div>
              <p className="text-xs text-gray-500">71.5% of population</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-base">Senior Citizens</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-purple-600">156</div>
              <p className="text-xs text-gray-500">12.5% of population</p>
            </CardContent>
          </Card>
        </div>
        
        <div className="space-y-4">
          <div className="flex justify-between items-center">
            <h3 className="text-lg font-semibold">Resident Records</h3>
            <Button onClick={() => alert('Add new resident form opened!')}>Add New Resident</Button>
          </div>
          
          <div className="space-y-2">
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center space-x-3">
                <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                  <Users className="w-5 h-5 text-blue-600" />
                </div>
                <div>
                  <p className="font-medium">Juan Dela Cruz</p>
                  <p className="text-sm text-gray-500">ID: RES-2024-001 • Age: 35 • Voter: Yes</p>
                </div>
              </div>
              <div className="flex space-x-2">
                <Button variant="outline" size="sm" onClick={() => alert('Editing Juan Dela Cruz profile...')}>Edit</Button>
                <Button variant="outline" size="sm" onClick={() => alert('Viewing Juan Dela Cruz detailed profile...')}>View</Button>
              </div>
            </div>
            
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center space-x-3">
                <div className="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                  <Users className="w-5 h-5 text-green-600" />
                </div>
                <div>
                  <p className="font-medium">Maria Santos</p>
                  <p className="text-sm text-gray-500">ID: RES-2024-002 • Age: 42 • Voter: Yes</p>
                </div>
              </div>
              <div className="flex space-x-2">
                <Button variant="outline" size="sm" onClick={() => alert('Editing Maria Santos profile...')}>Edit</Button>
                <Button variant="outline" size="sm" onClick={() => alert('Viewing Maria Santos detailed profile...')}>View</Button>
              </div>
            </div>
          </div>
        </div>
        
        <div className="flex space-x-2">
          <Button variant="outline" onClick={() => alert('Exporting resident database to CSV...')}>Export Database</Button>
          <Button variant="outline" onClick={() => alert('Generating demographic report...')}>Generate Report</Button>
          <Button variant="outline" onClick={() => alert('Opening advanced search filters...')}>Advanced Search</Button>
        </div>
      </div>
    </DialogContent>
  );

  // Document Management Modal
  const DocumentManagementModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="document-management-description">
      <DialogHeader>
        <DialogTitle>Document Management System</DialogTitle>
        <DialogDescription id="document-management-description">
          Process, track, and manage all document requests and official certificates.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Pending Requests</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-orange-600">23</div>
              <p className="text-xs text-gray-500">Needs processing</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Ready for Pickup</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-green-600">8</div>
              <p className="text-xs text-gray-500">Completed today</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">This Month</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-blue-600">156</div>
              <p className="text-xs text-gray-500">Total processed</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Revenue</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-purple-600">₱4,680</div>
              <p className="text-xs text-gray-500">Document fees</p>
            </CardContent>
          </Card>
        </div>
        
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Recent Document Requests</h3>
          
          <div className="space-y-2">
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center space-x-3">
                <div className="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                  <FileText className="w-5 h-5 text-orange-600" />
                </div>
                <div>
                  <p className="font-medium">Barangay Clearance - Juan Dela Cruz</p>
                  <p className="text-sm text-gray-500">REF: BR-2024-001 • Submitted: 2 days ago</p>
                </div>
              </div>
              <div className="flex items-center space-x-2">
                <Badge className="bg-orange-100 text-orange-800">Processing</Badge>
                <Button variant="outline" size="sm" onClick={() => alert('Processing document BR-2024-001...')}>Process</Button>
              </div>
            </div>
            
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center space-x-3">
                <div className="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                  <FileText className="w-5 h-5 text-green-600" />
                </div>
                <div>
                  <p className="font-medium">Certificate of Residency - Maria Santos</p>
                  <p className="text-sm text-gray-500">REF: CR-2024-002 • Completed: 1 hour ago</p>
                </div>
              </div>
              <div className="flex items-center space-x-2">
                <Badge className="bg-green-100 text-green-800">Ready for Pickup</Badge>
                <Button variant="outline" size="sm" onClick={() => alert('Printing document CR-2024-002...')}>Print</Button>
              </div>
            </div>
          </div>
        </div>
        
        <div className="flex space-x-2">
          <Button onClick={() => alert('Opening bulk processing interface...')}>Bulk Process</Button>
          <Button variant="outline" onClick={() => alert('Generating monthly document report...')}>Monthly Report</Button>
          <Button variant="outline" onClick={() => alert('Managing document templates...')}>Manage Templates</Button>
        </div>
      </div>
    </DialogContent>
  );

  // Financial Management Modal
  const FinancialManagementModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="financial-management-description">
      <DialogHeader>
        <DialogTitle>Financial Management Portal</DialogTitle>
        <DialogDescription id="financial-management-description">
          Track budgets, expenses, revenue, and financial reporting for barangay operations.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Monthly Budget</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-blue-600">₱250,000</div>
              <p className="text-xs text-gray-500">Allocated for March</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Total Revenue</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-green-600">₱87,450</div>
              <p className="text-xs text-gray-500">This month</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Expenses</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-red-600">₱134,200</div>
              <p className="text-xs text-gray-500">53.7% of budget</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Remaining</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-purple-600">₱115,800</div>
              <p className="text-xs text-gray-500">46.3% left</p>
            </CardContent>
          </Card>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <Card>
            <CardHeader>
              <CardTitle className="text-base">Revenue Sources</CardTitle>
            </CardHeader>
            <CardContent className="space-y-2">
              <div className="flex justify-between items-center">
                <span className="text-sm">Document Fees</span>
                <span className="font-medium">₱24,680</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm">Business Permits</span>
                <span className="font-medium">₱45,500</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm">Community Tax</span>
                <span className="font-medium">₱12,850</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm">Other Fees</span>
                <span className="font-medium">₱4,420</span>
              </div>
            </CardContent>
          </Card>
          
          <Card>
            <CardHeader>
              <CardTitle className="text-base">Major Expenses</CardTitle>
            </CardHeader>
            <CardContent className="space-y-2">
              <div className="flex justify-between items-center">
                <span className="text-sm">Office Supplies</span>
                <span className="font-medium">₱35,600</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm">Utilities</span>
                <span className="font-medium">₱28,900</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm">Equipment</span>
                <span className="font-medium">₱42,200</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm">Community Programs</span>
                <span className="font-medium">₱27,500</span>
              </div>
            </CardContent>
          </Card>
        </div>
        
        <div className="flex space-x-2">
          <Button onClick={() => alert('Opening budget planning interface...')}>Plan Budget</Button>
          <Button variant="outline" onClick={() => alert('Generating financial report...')}>Generate Report</Button>
          <Button variant="outline" onClick={() => alert('Exporting financial data...')}>Export Data</Button>
          <Button variant="outline" onClick={() => alert('Managing expense categories...')}>Manage Categories</Button>
        </div>
      </div>
    </DialogContent>
  );

  // Send Announcements Modal
  const SendAnnouncementsModal = () => (
    <DialogContent className="max-w-2xl" aria-describedby="send-announcements-description">
      <DialogHeader>
        <DialogTitle>Send Announcements</DialogTitle>
        <DialogDescription id="send-announcements-description">
          Create and broadcast announcements to all residents through multiple channels.
        </DialogDescription>
      </DialogHeader>
      <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); alert('Announcement sent successfully to all residents!'); setModalOpen(false); }}>
        <div>
          <Label>Announcement Type</Label>
          <Select required>
            <SelectTrigger>
              <SelectValue placeholder="Select announcement type" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="general">General Information</SelectItem>
              <SelectItem value="emergency">Emergency Alert</SelectItem>
              <SelectItem value="event">Community Event</SelectItem>
              <SelectItem value="health">Health Advisory</SelectItem>
              <SelectItem value="maintenance">Maintenance Notice</SelectItem>
            </SelectContent>
          </Select>
        </div>
        
        <div>
          <Label>Priority Level</Label>
          <Select required>
            <SelectTrigger>
              <SelectValue placeholder="Select priority" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="low">Low - Regular Information</SelectItem>
              <SelectItem value="medium">Medium - Important Notice</SelectItem>
              <SelectItem value="high">High - Urgent Alert</SelectItem>
              <SelectItem value="critical">Critical - Emergency</SelectItem>
            </SelectContent>
          </Select>
        </div>
        
        <div>
          <Label>Title</Label>
          <Input placeholder="Enter announcement title" required />
        </div>
        
        <div>
          <Label>Message</Label>
          <Textarea placeholder="Write your announcement message..." rows={4} required />
        </div>
        
        <div>
          <Label>Distribution Channels</Label>
          <div className="space-y-2 mt-2">
            <label className="flex items-center space-x-2">
              <input type="checkbox" defaultChecked />
              <span className="text-sm">Website Portal</span>
            </label>
            <label className="flex items-center space-x-2">
              <input type="checkbox" defaultChecked />
              <span className="text-sm">SMS Notifications</span>
            </label>
            <label className="flex items-center space-x-2">
              <input type="checkbox" />
              <span className="text-sm">Email Notifications</span>
            </label>
            <label className="flex items-center space-x-2">
              <input type="checkbox" />
              <span className="text-sm">Social Media</span>
            </label>
          </div>
        </div>
        
        <div className="flex space-x-2">
          <Button type="submit">Send Now</Button>
          <Button type="button" variant="outline" onClick={() => alert('Announcement scheduled for later!')}>Schedule</Button>
          <Button type="button" variant="outline" onClick={() => alert('Announcement saved as draft!')}>Save Draft</Button>
        </div>
      </form>
    </DialogContent>
  );

  // SMS Notifications Modal
  const SMSNotificationsModal = () => (
    <DialogContent className="max-w-2xl" aria-describedby="sms-notifications-description">
      <DialogHeader>
        <DialogTitle>SMS Notification System</DialogTitle>
        <DialogDescription id="sms-notifications-description">
          Send bulk SMS messages to residents and manage notification preferences.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Registered Numbers</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-blue-600">1,089</div>
              <p className="text-xs text-gray-500">Active subscribers</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Messages Sent</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-green-600">2,847</div>
              <p className="text-xs text-gray-500">This month</p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader className="pb-3">
              <CardTitle className="text-sm">Delivery Rate</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-purple-600">97.2%</div>
              <p className="text-xs text-gray-500">Success rate</p>
            </CardContent>
          </Card>
        </div>
        
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Quick SMS</h3>
          <div className="space-y-3">
            <div>
              <Label>Recipient Group</Label>
              <Select required>
                <SelectTrigger>
                  <SelectValue placeholder="Select recipient group" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="all">All Residents</SelectItem>
                  <SelectItem value="voters">Registered Voters</SelectItem>
                  <SelectItem value="seniors">Senior Citizens</SelectItem>
                  <SelectItem value="business">Business Owners</SelectItem>
                  <SelectItem value="custom">Custom Group</SelectItem>
                </SelectContent>
              </Select>
            </div>
            
            <div>
              <Label>Message</Label>
              <Textarea placeholder="Enter your SMS message (160 characters max)" maxLength={160} rows={3} />
              <p className="text-xs text-gray-500 mt-1">160 characters remaining</p>
            </div>
            
            <div className="flex space-x-2">
              <Button onClick={() => alert('SMS sent to selected group!')}>Send SMS</Button>
              <Button variant="outline" onClick={() => alert('Opening SMS templates...')}>Use Template</Button>
              <Button variant="outline" onClick={() => alert('Opening message scheduler...')}>Schedule</Button>
            </div>
          </div>
        </div>
        
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Recent Messages</h3>
          <div className="space-y-2">
            <div className="p-3 border rounded-lg">
              <div className="flex justify-between items-start mb-2">
                <span className="font-medium">Community Health Program</span>
                <Badge className="bg-green-100 text-green-800">Delivered</Badge>
              </div>
              <p className="text-sm text-gray-600">Free health checkup and vaccination this Saturday at Barangay Hall.</p>
              <p className="text-xs text-gray-500 mt-1">Sent to 1,089 recipients • 2 hours ago</p>
            </div>
          </div>
        </div>
      </div>
    </DialogContent>
  );

  // Meeting Scheduler Modal
  const MeetingSchedulerModal = () => (
    <DialogContent className="max-w-2xl" aria-describedby="meeting-scheduler-description">
      <DialogHeader>
        <DialogTitle>Meeting Scheduler</DialogTitle>
        <DialogDescription id="meeting-scheduler-description">
          Schedule and manage community meetings, assemblies, and official gatherings.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Schedule New Meeting</h3>
          <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); alert('Meeting scheduled successfully! Invitations will be sent to participants.'); setModalOpen(false); }}>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <Label>Meeting Type</Label>
                <Select required>
                  <SelectTrigger>
                    <SelectValue placeholder="Select meeting type" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="assembly">Barangay Assembly</SelectItem>
                    <SelectItem value="council">Council Meeting</SelectItem>
                    <SelectItem value="community">Community Forum</SelectItem>
                    <SelectItem value="emergency">Emergency Meeting</SelectItem>
                    <SelectItem value="planning">Planning Session</SelectItem>
                  </SelectContent>
                </Select>
              </div>
              
              <div>
                <Label>Priority</Label>
                <Select required>
                  <SelectTrigger>
                    <SelectValue placeholder="Select priority" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="routine">Routine</SelectItem>
                    <SelectItem value="important">Important</SelectItem>
                    <SelectItem value="urgent">Urgent</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
            
            <div>
              <Label>Meeting Title</Label>
              <Input placeholder="Enter meeting title" required />
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <Label>Date</Label>
                <Input type="date" required />
              </div>
              
              <div>
                <Label>Time</Label>
                <Input type="time" required />
              </div>
            </div>
            
            <div>
              <Label>Venue</Label>
              <Select required>
                <SelectTrigger>
                  <SelectValue placeholder="Select venue" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="hall">Barangay Hall</SelectItem>
                  <SelectItem value="community">Community Center</SelectItem>
                  <SelectItem value="court">Basketball Court</SelectItem>
                  <SelectItem value="covered">Covered Court</SelectItem>
                  <SelectItem value="other">Other Location</SelectItem>
                </SelectContent>
              </Select>
            </div>
            
            <div>
              <Label>Agenda</Label>
              <Textarea placeholder="Meeting agenda and topics to discuss..." rows={3} required />
            </div>
            
            <div>
              <Label>Participants</Label>
              <div className="space-y-2 mt-2">
                <label className="flex items-center space-x-2">
                  <input type="checkbox" defaultChecked />
                  <span className="text-sm">Barangay Council</span>
                </label>
                <label className="flex items-center space-x-2">
                  <input type="checkbox" />
                  <span className="text-sm">All Residents</span>
                </label>
                <label className="flex items-center space-x-2">
                  <input type="checkbox" />
                  <span className="text-sm">Business Owners</span>
                </label>
                <label className="flex items-center space-x-2">
                  <input type="checkbox" />
                  <span className="text-sm">Community Leaders</span>
                </label>
              </div>
            </div>
            
            <div className="flex space-x-2">
              <Button type="submit">Schedule Meeting</Button>
              <Button type="button" variant="outline" onClick={() => alert('Meeting saved as draft!')}>Save Draft</Button>
            </div>
          </form>
        </div>
        
        <div className="space-y-4">
          <h3 className="text-lg font-semibold">Upcoming Meetings</h3>
          <div className="space-y-2">
            <div className="p-3 border rounded-lg">
              <div className="flex justify-between items-start mb-2">
                <span className="font-medium">Monthly Barangay Assembly</span>
                <Badge>Scheduled</Badge>
              </div>
              <p className="text-sm text-gray-600">March 20, 2024 • 2:00 PM • Barangay Hall</p>
              <p className="text-xs text-gray-500 mt-1">147 invited • 89 confirmed</p>
            </div>
          </div>
        </div>
      </div>
    </DialogContent>
  );

  const BarangayPortalModal = () => (
    <DialogContent className="max-w-6xl max-h-[90vh] overflow-y-auto" aria-describedby="barangay-portal-description">
      <DialogHeader>
        <DialogTitle>Barangay Management Portal</DialogTitle>
        <DialogDescription id="barangay-portal-description">
          Comprehensive management portal for all barangay operations and services.
        </DialogDescription>
      </DialogHeader>
      
      {/* Portal Image */}
      <div className="mb-6 text-center">
        <img 
          src={managementPortalImage}
          alt="Barangay Management Portal"
          className="mx-auto max-w-full h-auto rounded-lg shadow-lg"
        />
      </div>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {/* Administrative Tools */}
        <Card>
          <CardHeader className="bg-blue-50">
            <CardTitle className="flex items-center text-blue-800">
              <Building className="mr-2 w-5 h-5" />
              Administrative Tools
            </CardTitle>
          </CardHeader>
          <CardContent className="p-4 space-y-3">
            <Button 
              variant="outline" 
              className="w-full justify-start h-auto p-3 text-left" 
              onClick={() => showModal(<ResidentDatabaseModal />)}
            >
              <Users className="mr-3 w-5 h-5 text-blue-600 flex-shrink-0" />
              <div className="flex-1 min-w-0">
                <div className="font-medium text-sm">Resident Database</div>
                <div className="text-xs text-gray-500 truncate">Manage resident records and information</div>
              </div>
            </Button>
            
            <Button 
              variant="outline" 
              className="w-full justify-start h-auto p-3 text-left" 
              onClick={() => showModal(<DocumentManagementModal />)}
            >
              <FileText className="mr-3 w-5 h-5 text-green-600 flex-shrink-0" />
              <div className="flex-1 min-w-0">
                <div className="font-medium text-sm">Document Management</div>
                <div className="text-xs text-gray-500 truncate">Process and track document requests</div>
              </div>
            </Button>
            
            <Button 
              variant="outline" 
              className="w-full justify-start h-auto p-3 text-left" 
              onClick={() => showModal(<FinancialManagementModal />)}
            >
              <CreditCard className="mr-3 w-5 h-5 text-purple-600 flex-shrink-0" />
              <div className="flex-1 min-w-0">
                <div className="font-medium text-sm">Financial Management</div>
                <div className="text-xs text-gray-500 truncate">Track budgets and financial reports</div>
              </div>
            </Button>
          </CardContent>
        </Card>

        {/* Communication Tools */}
        <Card>
          <CardHeader className="bg-orange-50">
            <CardTitle className="flex items-center text-orange-800">
              <Megaphone className="mr-2 w-5 h-5" />
              Communication Tools
            </CardTitle>
          </CardHeader>
          <CardContent className="p-4 space-y-3">
            <Button 
              variant="outline" 
              className="w-full justify-start h-auto p-3 text-left" 
              onClick={() => showModal(<SendAnnouncementsModal />)}
            >
              <Bell className="mr-3 w-5 h-5 text-red-600 flex-shrink-0" />
              <div className="flex-1 min-w-0">
                <div className="font-medium text-sm">Send Announcements</div>
                <div className="text-xs text-gray-500 truncate">Broadcast notifications to residents</div>
              </div>
            </Button>
            
            <Button 
              variant="outline" 
              className="w-full justify-start h-auto p-3 text-left" 
              onClick={() => showModal(<SMSNotificationsModal />)}
            >
              <MessageSquare className="mr-3 w-5 h-5 text-indigo-600 flex-shrink-0" />
              <div className="flex-1 min-w-0">
                <div className="font-medium text-sm">SMS Notifications</div>
                <div className="text-xs text-gray-500 truncate">Send bulk SMS messages</div>
              </div>
            </Button>
            
            <Button 
              variant="outline" 
              className="w-full justify-start h-auto p-3 text-left" 
              onClick={() => showModal(<MeetingSchedulerModal />)}
            >
              <Calendar className="mr-3 w-5 h-5 text-teal-600 flex-shrink-0" />
              <div className="flex-1 min-w-0">
                <div className="font-medium text-sm">Meeting Scheduler</div>
                <div className="text-xs text-gray-500 truncate">Schedule community meetings</div>
              </div>
            </Button>
          </CardContent>
        </Card>
      </div>
      
      <div className="mt-6 p-4 bg-red-50 rounded-lg">
        <h4 className="font-semibold text-red-800 mb-2 flex items-center">
          <Shield className="mr-2 w-4 h-4" />
          Security Notice
        </h4>
        <p className="text-sm text-red-700">
          This portal requires proper authorization and is restricted to authorized barangay personnel only. 
          All activities are logged and monitored for security purposes.
        </p>
      </div>
    </DialogContent>
  );

  // Notification Modal
  const NotificationModal = () => (
    <DialogContent className="max-w-md" aria-describedby="notification-description">
      <DialogHeader>
        <DialogTitle className="text-center">Notification</DialogTitle>
        <DialogDescription id="notification-description" className="sr-only">
          View your notification messages and alerts from the barangay system.
        </DialogDescription>
      </DialogHeader>
      
      <div className="flex flex-col items-center justify-center py-12 text-center">
        <div className="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-6">
          <BellOff className="w-8 h-8 text-gray-400" />
        </div>
        
        <h3 className="text-lg font-semibold text-gray-800 mb-2">No Notification Here</h3>
        <p className="text-sm text-gray-500 mb-6 max-w-xs">
          There are no notifications for now. We will notify you when there is something to update.
        </p>
        
        <Button 
          className="w-full bg-indigo-600 hover:bg-indigo-700 text-white"
          onClick={() => setModalOpen(false)}
        >
          Go Back To Home
        </Button>
      </div>
      
      <div className="mt-6 p-4 bg-blue-50 rounded-lg">
        <h4 className="font-semibold text-blue-800 text-sm mb-2">Notification Types</h4>
        <div className="text-xs text-blue-700 space-y-1">
          <div>• Document processing updates</div>
          <div>• Payment confirmations</div>
          <div>• Community announcements</div>
          <div>• Emergency alerts</div>
          <div>• System maintenance notices</div>
        </div>
      </div>
    </DialogContent>
  );

  // Settings Modal
  const SettingsModal = () => (
    <DialogContent className="max-w-2xl max-h-[80vh] overflow-y-auto" aria-describedby="settings-description">
      <DialogHeader>
        <DialogTitle className="flex items-center">
          <Settings className="w-5 h-5 mr-2 text-orange-600" />
          Account Settings
        </DialogTitle>
        <DialogDescription id="settings-description">
          Manage your account preferences, security settings, and notification options.
        </DialogDescription>
      </DialogHeader>
      
      <div className="space-y-6">
        {/* Account Information */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">Account Information</h3>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <Label>Display Name</Label>
              <Input defaultValue={`${currentUser?.firstName || 'Juan'} ${currentUser?.lastName || 'Dela Cruz'}`} />
            </div>
            <div>
              <Label>Email Address</Label>
              <Input defaultValue={currentUser?.email || 'juan@email.com'} />
            </div>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <Label>Contact Number</Label>
              <Input placeholder="+63 912 345 6789" />
            </div>
            <div>
              <Label>Resident ID</Label>
              <Input defaultValue={currentUser?.residentId || 'RES-2024-001'} disabled />
            </div>
          </div>
        </div>

        {/* Security Settings */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">Security Settings</h3>
          
          <div className="space-y-3">
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center space-x-3">
                <Lock className="w-5 h-5 text-red-600" />
                <div>
                  <p className="font-medium text-sm">Change Password</p>
                  <p className="text-xs text-gray-500">Update your account password</p>
                </div>
              </div>
              <Button variant="outline" size="sm" onClick={() => alert('Password change form would open here')}>
                Change
              </Button>
            </div>
            
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center space-x-3">
                <QrCode className="w-5 h-5 text-blue-600" />
                <div>
                  <p className="font-medium text-sm">QR Code Login</p>
                  <p className="text-xs text-gray-500">Manage QR code access settings</p>
                </div>
              </div>
              <div className="flex items-center space-x-2">
                <span className="text-xs text-green-600">Enabled</span>
                <Button variant="outline" size="sm" onClick={() => alert('QR code settings would open here')}>
                  Manage
                </Button>
              </div>
            </div>
          </div>
        </div>

        {/* Notification Preferences */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">Notification Preferences</h3>
          
          <div className="space-y-3">
            <div className="flex items-center justify-between">
              <div>
                <p className="font-medium text-sm">Email Notifications</p>
                <p className="text-xs text-gray-500">Receive updates via email</p>
              </div>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => alert('Email notification toggle')}
              >
                <ToggleRight className="w-6 h-6 text-blue-600" />
              </Button>
            </div>
            
            <div className="flex items-center justify-between">
              <div>
                <p className="font-medium text-sm">SMS Notifications</p>
                <p className="text-xs text-gray-500">Receive updates via SMS</p>
              </div>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => alert('SMS notification toggle')}
              >
                <ToggleRight className="w-6 h-6 text-blue-600" />
              </Button>
            </div>
            
            <div className="flex items-center justify-between">
              <div>
                <p className="font-medium text-sm">Emergency Alerts</p>
                <p className="text-xs text-gray-500">Critical emergency notifications</p>
              </div>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => alert('Emergency alerts cannot be disabled')}
              >
                <ToggleRight className="w-6 h-6 text-red-600" />
              </Button>
            </div>
          </div>
        </div>

        {/* Privacy Settings */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg border-b pb-2">Privacy & Data</h3>
          
          <div className="space-y-3">
            <Button 
              variant="outline" 
              className="w-full justify-start"
              onClick={() => alert('Data export process would start here')}
            >
              <Download className="w-4 h-4 mr-2" />
              Download My Data
            </Button>
            
            <Button 
              variant="outline" 
              className="w-full justify-start text-red-600 border-red-200 hover:bg-red-50"
              onClick={() => alert('Account deletion confirmation would appear here')}
            >
              <Trash2 className="w-4 h-4 mr-2" />
              Delete Account
            </Button>
          </div>
        </div>

        <div className="flex space-x-3">
          <Button 
            className="flex-1"
            onClick={() => {
              alert('Settings saved successfully!');
              setModalOpen(false);
            }}
          >
            Save Changes
          </Button>
          <Button 
            variant="outline" 
            className="flex-1" 
            onClick={() => setModalOpen(false)}
          >
            Cancel
          </Button>
        </div>
      </div>
    </DialogContent>
  );

  // Files Modal (Enhanced)
  const FilesModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="files-description">
      <DialogHeader>
        <DialogTitle className="flex items-center">
          <FolderOpen className="w-5 h-5 mr-2 text-purple-600" />
          My Files & Documents
        </DialogTitle>
        <DialogDescription id="files-description">
          Access and manage your submitted forms, documents, and download completed certificates.
        </DialogDescription>
      </DialogHeader>
      
      <div className="space-y-6">
        {/* File Statistics */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-2xl font-bold text-blue-600">{submittedForms.length}</div>
              <p className="text-sm text-gray-600">Total Files</p>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-2xl font-bold text-orange-600">
                {submittedForms.filter(f => f.status === 'Processing').length}
              </div>
              <p className="text-sm text-gray-600">Processing</p>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-2xl font-bold text-green-600">
                {submittedForms.filter(f => f.status === 'Completed').length}
              </div>
              <p className="text-sm text-gray-600">Completed</p>
            </CardContent>
          </Card>
          <Card>
            <CardContent className="p-4 text-center">
              <div className="text-2xl font-bold text-purple-600">2.4</div>
              <p className="text-sm text-gray-600">MB Used</p>
            </CardContent>
          </Card>
        </div>

        {/* File Categories */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg">File Categories</h3>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <Button 
              variant="outline" 
              className="h-auto p-4 flex flex-col items-center space-y-2"
              onClick={() => showModal(<FormStatusModal />)}
            >
              <FileText className="w-8 h-8 text-blue-600" />
              <span className="font-medium">Document Requests</span>
              <span className="text-xs text-gray-500">Certificates & Forms</span>
            </Button>
            
            <Button 
              variant="outline" 
              className="h-auto p-4 flex flex-col items-center space-y-2"
              onClick={() => alert('Payment receipts and transaction history')}
            >
              <CreditCard className="w-8 h-8 text-green-600" />
              <span className="font-medium">Payment Records</span>
              <span className="text-xs text-gray-500">Receipts & Transactions</span>
            </Button>
            
            <Button 
              variant="outline" 
              className="h-auto p-4 flex flex-col items-center space-y-2"
              onClick={() => alert('Personal documents and ID verification files')}
            >
              <UserCircle className="w-8 h-8 text-purple-600" />
              <span className="font-medium">Personal Documents</span>
              <span className="text-xs text-gray-500">ID & Verification</span>
            </Button>
          </div>
        </div>

        {/* Recent Files */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg">Recent Files</h3>
          
          {submittedForms.length > 0 ? (
            <div className="space-y-3">
              {submittedForms.slice(0, 5).map((form, index) => (
                <div key={index} className="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                  <div className="flex items-center space-x-3">
                    <div className="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                      <FileText className="w-5 h-5 text-blue-600" />
                    </div>
                    <div>
                      <p className="font-medium text-sm">{form.type}</p>
                      <p className="text-xs text-gray-500">Ref: {form.id} • {form.dateSubmitted}</p>
                    </div>
                  </div>
                  <div className="flex items-center space-x-2">
                    <Badge className={
                      form.status === 'Completed' ? 'bg-green-100 text-green-800' :
                      form.status === 'Processing' ? 'bg-orange-100 text-orange-800' :
                      'bg-blue-100 text-blue-800'
                    }>
                      {form.status}
                    </Badge>
                    {form.status === 'Completed' && (
                      <Button 
                        size="sm" 
                        variant="outline"
                        onClick={() => alert(`Downloading ${form.type}...`)}
                      >
                        <Download className="w-4 h-4 mr-1" />
                        Download
                      </Button>
                    )}
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="text-center py-8 text-gray-500">
              <FolderOpen className="w-12 h-12 mx-auto mb-2 text-gray-300" />
              <p>No files uploaded yet</p>
              <p className="text-sm">Submit a form to see your files here</p>
            </div>
          )}
        </div>

        <div className="flex space-x-3">
          <Button 
            variant="outline"
            onClick={() => showModal(<DocumentRequestModal />)}
          >
            <FileText className="w-4 h-4 mr-2" />
            Request New Document
          </Button>
          <Button 
            variant="outline"
            onClick={() => alert('File management tools would open here')}
          >
            <Settings className="w-4 h-4 mr-2" />
            Manage Files
          </Button>
        </div>
      </div>
    </DialogContent>
  );

  // Global Announcements Modal (Enhanced)
  const GlobalAnnouncementsModal = () => (
    <DialogContent className="max-w-3xl max-h-[80vh] overflow-y-auto" aria-describedby="global-announcements-description">
      <DialogHeader>
        <DialogTitle className="flex items-center">
          <Megaphone className="w-5 h-5 mr-2 text-red-600" />
          Global Announcements
        </DialogTitle>
        <DialogDescription id="global-announcements-description">
          Official announcements, emergency alerts, and important updates from the barangay government.
        </DialogDescription>
      </DialogHeader>
      
      <div className="space-y-6">
        {/* Announcement Categories */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-3">
          <Button variant="outline" size="sm" className="justify-start">
            <AlertTriangle className="w-4 h-4 mr-2 text-red-600" />
            Emergency
          </Button>
          <Button variant="outline" size="sm" className="justify-start">
            <Info className="w-4 h-4 mr-2 text-blue-600" />
            General
          </Button>
          <Button variant="outline" size="sm" className="justify-start">
            <Calendar className="w-4 h-4 mr-2 text-green-600" />
            Events
          </Button>
          <Button variant="outline" size="sm" className="justify-start">
            <Building className="w-4 h-4 mr-2 text-purple-600" />
            Services
          </Button>
        </div>

        {/* Priority Announcements */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg text-red-800">🚨 Priority Announcements</h3>
          
          <div className="border-l-4 border-red-500 pl-4 py-4 bg-red-50 rounded-r-lg">
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <h4 className="font-semibold text-red-800 flex items-center">
                  <AlertTriangle className="w-4 h-4 mr-2" />
                  Typhoon Warning Signal No. 2
                </h4>
                <p className="text-red-700 text-sm mt-2">
                  Strong winds and heavy rainfall expected. Residents in low-lying areas are advised to prepare for possible evacuation. 
                  Emergency shelters are available at the community center and barangay hall.
                </p>
                <div className="flex items-center mt-3 space-x-4">
                  <span className="text-xs text-red-600">Posted: 45 minutes ago</span>
                  <Button size="sm" variant="outline" className="text-red-600 border-red-200">
                    View Details
                  </Button>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Recent Announcements */}
        <div className="space-y-4">
          <h3 className="font-semibold text-lg">Recent Announcements</h3>
          
          <div className="space-y-4">
            <div className="border-l-4 border-blue-500 pl-4 py-3 bg-blue-50 rounded-r-lg">
              <h4 className="font-semibold text-blue-800">Community Health Program - Free Vaccination Drive</h4>
              <p className="text-blue-700 text-sm mt-1">
                Free COVID-19 booster shots and routine vaccinations available this Saturday, March 16, 2024, 
                from 8:00 AM to 5:00 PM at the Barangay Hall. Bring valid ID and vaccination card.
              </p>
              <div className="flex items-center justify-between mt-3">
                <span className="text-xs text-blue-600">Health Services • 3 hours ago</span>
                <div className="flex space-x-2">
                  <Button size="sm" variant="outline" className="text-blue-600">Register</Button>
                  <Button size="sm" variant="outline" className="text-blue-600">Share</Button>
                </div>
              </div>
            </div>
            
            <div className="border-l-4 border-green-500 pl-4 py-3 bg-green-50 rounded-r-lg">
              <h4 className="font-semibold text-green-800">New Digital Services Platform Launch</h4>
              <p className="text-green-700 text-sm mt-1">
                Enhanced online services now available! New features include QR code login, digital document tracking, 
                and mobile-responsive design for better accessibility.
              </p>
              <div className="flex items-center justify-between mt-3">
                <span className="text-xs text-green-600">IT Services • 1 day ago</span>
                <div className="flex space-x-2">
                  <Button size="sm" variant="outline" className="text-green-600">Learn More</Button>
                  <Button size="sm" variant="outline" className="text-green-600">Share</Button>
                </div>
              </div>
            </div>
            
            <div className="border-l-4 border-purple-500 pl-4 py-3 bg-purple-50 rounded-r-lg">
              <h4 className="font-semibold text-purple-800">Community Clean-Up Drive Volunteers Needed</h4>
              <p className="text-purple-700 text-sm mt-1">
                Join our monthly community clean-up drive every last Saturday of the month. 
                Help keep our barangay clean and earn volunteer recognition points.
              </p>
              <div className="flex items-center justify-between mt-3">
                <span className="text-xs text-purple-600">Community Relations • 2 days ago</span>
                <div className="flex space-x-2">
                  <Button size="sm" variant="outline" className="text-purple-600">Volunteer</Button>
                  <Button size="sm" variant="outline" className="text-purple-600">Share</Button>
                </div>
              </div>
            </div>
            
            <div className="border-l-4 border-orange-500 pl-4 py-3 bg-orange-50 rounded-r-lg">
              <h4 className="font-semibold text-orange-800">Water Service Interruption Notice</h4>
              <p className="text-orange-700 text-sm mt-1">
                Scheduled water service maintenance on March 18, 2024, from 6:00 AM to 2:00 PM. 
                Affected areas: Blocks 1-5. Please store water in advance.
              </p>
              <div className="flex items-center justify-between mt-3">
                <span className="text-xs text-orange-600">Public Works • 3 days ago</span>
                <div className="flex space-x-2">
                  <Button size="sm" variant="outline" className="text-orange-600">View Map</Button>
                  <Button size="sm" variant="outline" className="text-orange-600">Share</Button>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Subscription Settings */}
        <div className="p-4 bg-gray-50 rounded-lg">
          <h4 className="font-semibold text-gray-800 mb-3">Announcement Preferences</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
            <label className="flex items-center space-x-2">
              <input type="checkbox" defaultChecked className="rounded" />
              <span className="text-sm">Emergency Alerts</span>
            </label>
            <label className="flex items-center space-x-2">
              <input type="checkbox" defaultChecked className="rounded" />
              <span className="text-sm">Community Events</span>
            </label>
            <label className="flex items-center space-x-2">
              <input type="checkbox" defaultChecked className="rounded" />
              <span className="text-sm">Service Updates</span>
            </label>
            <label className="flex items-center space-x-2">
              <input type="checkbox" className="rounded" />
              <span className="text-sm">Maintenance Notices</span>
            </label>
          </div>
          <Button 
            size="sm" 
            className="mt-3"
            onClick={() => alert('Notification preferences saved!')}
          >
            Save Preferences
          </Button>
        </div>

        <div className="flex space-x-3">
          <Button 
            variant="outline"
            onClick={() => alert('Email subscription management would open here')}
          >
            <Mail className="w-4 h-4 mr-2" />
            Email Subscription
          </Button>
          <Button 
            variant="outline"
            onClick={() => alert('SMS subscription management would open here')}
          >
            <MessageSquare className="w-4 h-4 mr-2" />
            SMS Alerts
          </Button>
          <Button 
            variant="outline"
            onClick={() => showModal(<FeedbackModal />)}
          >
            <MessageSquare className="w-4 h-4 mr-2" />
            Send Feedback
          </Button>
        </div>
      </div>
    </DialogContent>
  );

  // User Profile Panel Component
  const UserProfilePanel = () => (
    <SheetContent side="right" className="w-80 p-0">
      <SheetHeader className="sr-only">
        <SheetTitle>User Account Panel</SheetTitle>
        <SheetDescription>
          Access your account settings, notifications, and profile management options.
        </SheetDescription>
      </SheetHeader>
      <div className="flex flex-col h-full">
        {/* Header */}
        <div className="p-6 border-b bg-gradient-to-r from-blue-600 to-purple-600 text-white">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-lg font-semibold">Account</h2>
            <Button 
              variant="ghost" 
              size="icon" 
              className="text-white hover:bg-white/20"
              onClick={() => setUserPanelOpen(false)}
            >
              <X className="h-4 w-4" />
            </Button>
          </div>
          
          {/* User Info */}
          <div className="flex items-center space-x-3">
            <div className="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
              <UserCircle className="w-8 h-8 text-white" />
            </div>
            <div>
              <h3 className="font-semibold text-lg">
                {currentUser?.firstName?.toUpperCase() || 'USER'}
              </h3>
              <p className="text-blue-100 text-sm">{currentUser?.email}</p>
              <p className="text-blue-200 text-xs">{currentUser?.residentId}</p>
            </div>
          </div>
          
          {/* Logout Button */}
          <Button 
            variant="outline" 
            className="w-full mt-4 bg-white/10 border-white/30 text-white hover:bg-white/20"
            onClick={handleLogout}
          >
            <LogOut className="w-4 h-4 mr-2" />
            Logout
          </Button>
        </div>
        
        {/* Menu Items */}
        <div className="flex-1 overflow-y-auto">
          <div className="p-4 space-y-2">
            {/* Notifications */}
            <Button 
              variant="ghost" 
              className="w-full justify-start h-12 px-4"
              onClick={() => {
                setUserPanelOpen(false);
                showModal(<NotificationModal />);
              }}
            >
              <Bell className="w-5 h-5 mr-3 text-blue-600" />
              <span>Notifications</span>
              <Badge className="ml-auto bg-red-500 text-white text-xs">5</Badge>
            </Button>
            
            {/* Profile */}
            <Button 
              variant="ghost" 
              className="w-full justify-start h-12 px-4"
              onClick={() => {
                setUserPanelOpen(false);
                showModal(<ProfileModal />);
              }}
            >
              <UserCircle className="w-5 h-5 mr-3 text-purple-600" />
              <span>Profile</span>
            </Button>
            
            {/* Files */}
            <Button 
              variant="ghost" 
              className="w-full justify-start h-12 px-4"
              onClick={() => {
                setUserPanelOpen(false);
                showModal(<FilesModal />);
              }}
            >
              <FolderOpen className="w-5 h-5 mr-3 text-purple-600" />
              <span>Files</span>
            </Button>
            
            {/* Settings */}
            <Button 
              variant="ghost" 
              className="w-full justify-start h-12 px-4"
              onClick={() => {
                setUserPanelOpen(false);
                showModal(<SettingsModal />);
              }}
            >
              <Settings className="w-5 h-5 mr-3 text-indigo-600" />
              <span>Settings</span>
            </Button>
            
            {/* Global Announcements */}
            <Button 
              variant="ghost" 
              className="w-full justify-start h-12 px-4"
              onClick={() => {
                setUserPanelOpen(false);
                showModal(<GlobalAnnouncementsModal />);
              }}
            >
              <Megaphone className="w-5 h-5 mr-3 text-red-600" />
              <span>Global Announcements</span>
            </Button>
          </div>
          
          <Separator className="mx-4" />
          
          {/* Accessibility Options */}
          <div className="p-4 space-y-4">
            <h4 className="font-semibold text-sm text-gray-600 mb-3">Accessibility</h4>
            
            {/* High Contrast UI */}
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                <Eye className="w-5 h-5 text-indigo-600" />
                <div>
                  <p className="font-medium text-sm">Use High Contrast UI</p>
                  <p className="text-xs text-gray-500">Improves visibility and readability</p>
                </div>
              </div>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => {
                  setHighContrast(!highContrast);
                  if (!highContrast) {
                    document.documentElement.classList.add('high-contrast');
                  } else {
                    document.documentElement.classList.remove('high-contrast');
                  }
                }}
                className="shrink-0"
              >
                {highContrast ? (
                  <ToggleRight className="w-6 h-6 text-blue-600" />
                ) : (
                  <ToggleLeft className="w-6 h-6 text-gray-400" />
                )}
              </Button>
            </div>
            
            {/* Dyslexia Friendly Font */}
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                <FileText className="w-5 h-5 text-teal-600" />
                <div>
                  <p className="font-medium text-sm">Use a Dyslexia Friendly Font</p>
                  <p className="text-xs text-gray-500">Easier reading for dyslexic users</p>
                </div>
              </div>
              <Button
                variant="ghost"
                size="icon"
                onClick={() => {
                  setDyslexiaFont(!dyslexiaFont);
                  if (!dyslexiaFont) {
                    document.documentElement.classList.add('dyslexia-font');
                  } else {
                    document.documentElement.classList.remove('dyslexia-font');
                  }
                }}
                className="shrink-0"
              >
                {dyslexiaFont ? (
                  <ToggleRight className="w-6 h-6 text-blue-600" />
                ) : (
                  <ToggleLeft className="w-6 h-6 text-gray-400" />
                )}
              </Button>
            </div>
          </div>
        </div>
        
        {/* Footer */}
        <div className="p-4 border-t bg-gray-50">
          <div className="text-center text-xs text-gray-500">
            <p>Barangayan E Management System</p>
            <p>Version 2.4.1 • Last updated: March 2024</p>
          </div>
        </div>
      </div>
    </SheetContent>
  );

  const CitizensCharterModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="citizens-charter-description">
      <DialogHeader>
        <DialogTitle>Citizen's Charter</DialogTitle>
        <DialogDescription id="citizens-charter-description">
          Our commitment to providing quality services and your rights as a citizen.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <section>
          <h3 className="font-semibold text-lg mb-3 flex items-center">
            <Shield className="mr-2 w-5 h-5 text-blue-600" />
            Service Standards
          </h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div className="border-l-4 border-blue-500 pl-4">
              <h4 className="font-semibold">Document Processing</h4>
              <ul className="text-sm text-gray-600 mt-1 space-y-1">
                <li>• Barangay Clearance: 3-5 business days</li>
                <li>• Certificate of Residency: 2-3 business days</li>
                <li>• Certificate of Indigency: 3-4 business days</li>
                <li>• Business Permits: 7-10 business days</li>
              </ul>
            </div>
            <div className="border-l-4 border-green-500 pl-4">
              <h4 className="font-semibold">Service Hours</h4>
              <ul className="text-sm text-gray-600 mt-1 space-y-1">
                <li>• Monday-Friday: 8:00 AM - 5:00 PM</li>
                <li>• Saturday: 8:00 AM - 12:00 PM</li>
                <li>• Lunch Break: 12:00 PM - 1:00 PM</li>
                <li>• Emergency Services: 24/7</li>
              </ul>
            </div>
          </div>
        </section>
        <section>
          <h3 className="font-semibold text-lg mb-3 flex items-center">
            <Users className="mr-2 w-5 h-5 text-green-600" />
            Your Rights as a Citizen
          </h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <ul className="space-y-2 text-sm text-gray-600">
              <li>• Right to courteous and prompt service</li>
              <li>• Right to information and transparency</li>
              <li>• Right to file complaints and feedback</li>
              <li>• Right to privacy and data protection</li>
            </ul>
            <ul className="space-y-2 text-sm text-gray-600">
              <li>• Right to participate in community decisions</li>
              <li>• Right to equal treatment regardless of status</li>
              <li>• Right to appeal decisions and processes</li>
              <li>• Right to access government services</li>
            </ul>
          </div>
        </section>
        <section>
          <h3 className="font-semibold text-lg mb-3 flex items-center">
            <MessageSquare className="mr-2 w-5 h-5 text-orange-600" />
            Feedback and Complaints
          </h3>
          <div className="p-4 bg-orange-50 rounded-lg">
            <p className="text-sm text-orange-800 mb-3">
              We value your feedback and are committed to continuous improvement. If you're not satisfied with our service:
            </p>
            <div className="space-y-2 text-sm text-orange-700">
              <p>1. Speak with our frontline staff or supervisor</p>
              <p>2. File a formal complaint through our feedback system</p>
              <p>3. Contact the Barangay Captain's office directly</p>
              <p>4. Reach out to higher authorities if needed</p>
            </div>
            <Button className="mt-3 bg-orange-600 hover:bg-orange-700" onClick={() => showModal(<FeedbackModal />)}>
              Submit Feedback
            </Button>
          </div>
        </section>
      </div>
    </DialogContent>
  );

  const RequirementsOrdinancesModal = () => (
    <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto" aria-describedby="requirements-ordinances-description">
      <DialogHeader>
        <DialogTitle>Requirements and Ordinances</DialogTitle>
        <DialogDescription id="requirements-ordinances-description">
          Document requirements for services and local ordinances governing the barangay.
        </DialogDescription>
      </DialogHeader>
      <div className="space-y-6">
        <section>
          <h3 className="font-semibold text-lg mb-3 flex items-center">
            <FileText className="mr-2 w-5 h-5 text-blue-600" />
            Document Requirements
          </h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Card>
              <CardHeader>
                <CardTitle className="text-base">Barangay Clearance</CardTitle>
              </CardHeader>
              <CardContent className="text-sm space-y-1">
                <p>• Valid government-issued ID</p>
                <p>• Cedula or Community Tax Certificate</p>
                <p>• Barangay residency proof</p>
                <p>• Processing fee: ₱30.00</p>
              </CardContent>
            </Card>
            <Card>
              <CardHeader>
                <CardTitle className="text-base">Business Permit</CardTitle>
              </CardHeader>
              <CardContent className="text-sm space-y-1">
                <p>• DTI/SEC registration</p>
                <p>• Barangay clearance</p>
                <p>• Location clearance</p>
                <p>• Fire safety inspection certificate</p>
                <p>• Processing fee: ₱500.00</p>
              </CardContent>
            </Card>
            <Card>
              <CardHeader>
                <CardTitle className="text-base">Certificate of Indigency</CardTitle>
              </CardHeader>
              <CardContent className="text-sm space-y-1">
                <p>• Valid government-issued ID</p>
                <p>• Proof of low income/unemployment</p>
                <p>• Barangay residency proof</p>
                <p>• Processing fee: ₱20.00</p>
              </CardContent>
            </Card>
            <Card>
              <CardHeader>
                <CardTitle className="text-base">Certificate of Residency</CardTitle>
              </CardHeader>
              <CardContent className="text-sm space-y-1">
                <p>• Valid government-issued ID</p>
                <p>• Proof of residence (bills/lease)</p>
                <p>• Length of residency documentation</p>
                <p>• Processing fee: ₱25.00</p>
              </CardContent>
            </Card>
          </div>
        </section>
        <section>
          <h3 className="font-semibold text-lg mb-3 flex items-center">
            <Gavel className="mr-2 w-5 h-5 text-red-600" />
            Local Ordinances
          </h3>
          <div className="space-y-3">
            <div className="border-l-4 border-red-500 pl-4 py-2">
              <h4 className="font-semibold">Ordinance No. 2024-001: Noise Control</h4>
              <p className="text-sm text-gray-600">Regulates noise levels during night hours (10 PM - 6 AM) to maintain peace and order.</p>
            </div>
            <div className="border-l-4 border-green-500 pl-4 py-2">
              <h4 className="font-semibold">Ordinance No. 2024-002: Waste Management</h4>
              <p className="text-sm text-gray-600">Mandatory waste segregation and proper disposal guidelines for all residents.</p>
            </div>
            <div className="border-l-4 border-blue-500 pl-4 py-2">
              <h4 className="font-semibold">Ordinance No. 2024-003: Business Registration</h4>
              <p className="text-sm text-gray-600">Requirements and procedures for business permit applications and renewals.</p>
            </div>
            <div className="border-l-4 border-purple-500 pl-4 py-2">
              <h4 className="font-semibold">Ordinance No. 2024-004: Community Safety</h4>
              <p className="text-sm text-gray-600">Guidelines for neighborhood watch programs and emergency response protocols.</p>
            </div>
          </div>
        </section>
        <div className="p-4 bg-gray-50 rounded-lg">
          <h4 className="font-semibold mb-2">Need Help?</h4>
          <p className="text-sm text-gray-600 mb-3">
            For clarification on requirements or ordinances, visit our office or contact us during business hours.
          </p>
          <div className="flex space-x-2">
            <Button variant="outline" size="sm">Download Full List</Button>
            <Button variant="outline" size="sm">Contact Office</Button>
          </div>
        </div>
      </div>
    </DialogContent>
  );

  const ServiceCards = () => (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-gradient-to-br from-blue-500 to-blue-600 text-white" onClick={() => showModal(<DocumentRequestModal />)}>
        <CardContent className="p-6 text-center">
          <FileText className="w-12 h-12 mx-auto mb-4" />
          <h3 className="font-semibold mb-2">Document Request</h3>
          <p className="text-sm opacity-90">Request & track official documents</p>
        </CardContent>
      </Card>
      
      <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-gradient-to-br from-purple-500 to-purple-600 text-white" onClick={() => showModal(<PaymentsModal />)}>
        <CardContent className="p-6 text-center">
          <CreditCard className="w-12 h-12 mx-auto mb-4" />
          <h3 className="font-semibold mb-2">Online Payments</h3>
          <p className="text-sm opacity-90">Pay fees and taxes securely</p>
        </CardContent>
      </Card>
      
      <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-gradient-to-br from-indigo-500 to-purple-500 text-white" onClick={() => showModal(<ReportIssuesModal />)}>
        <CardContent className="p-6 text-center">
          <AlertTriangle className="w-12 h-12 mx-auto mb-4" />
          <h3 className="font-semibold mb-2">Report Issues</h3>
          <p className="text-sm opacity-90">Report incidents & complaints</p>
        </CardContent>
      </Card>
      
      <Card className="cursor-pointer hover:shadow-lg transition-shadow bg-gradient-to-br from-purple-600 to-blue-500 text-white" onClick={() => showModal(<FacilityBookingModal />)}>
        <CardContent className="p-6 text-center">
          <Calendar className="w-12 h-12 mx-auto mb-4" />
          <h3 className="font-semibold mb-2">Facility Booking</h3>
          <p className="text-sm opacity-90">Reserve community facilities</p>
        </CardContent>
      </Card>
    </div>
  );

  return (
    <div className="min-h-screen bg-gray-50 relative">
      {/* Top Navigation Bar */}
      <nav className="bg-gradient-to-r from-blue-800/95 to-blue-900/95 backdrop-blur-sm text-white py-2 sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4">
          <div className="flex justify-between items-center text-sm">
            <span className="font-semibold">GOV.PH</span>
            <div className="hidden lg:flex space-x-6">
              <button onClick={() => showSection('home')} className="hover:text-blue-200 transition-colors">HOME</button>
              <button onClick={() => showSection('services')} className="hover:text-blue-200 transition-colors">SERVICES</button>
              <button onClick={() => showSection('community')} className="hover:text-blue-200 transition-colors">COMMUNITY</button>
              <button onClick={() => showSection('about')} className="hover:text-blue-200 transition-colors">ABOUT US</button>
              <button onClick={() => showModal(<TransparencyModal />)} className="hover:text-blue-200 transition-colors">TRANSPARENCY</button>
              <button onClick={() => showModal(<CareersModal />)} className="hover:text-blue-200 transition-colors">CAREERS</button>
              <button onClick={() => showModal(<PrivacyPolicyModal />)} className="hover:text-blue-200 transition-colors">PRIVACY POLICY</button>
              <button onClick={() => showModal(<TourismModal />)} className="hover:text-blue-200 transition-colors">TOURISM</button>
              <button onClick={() => showModal(<SearchModal />)} className="hover:text-blue-200 transition-colors flex items-center">
                <Search className="w-4 h-4 mr-1" />
                SEARCH
              </button>
            </div>
            <div className="lg:hidden">
              <button onClick={() => showModal(<SearchModal />)} className="hover:text-blue-200 transition-colors">
                <Search className="w-4 h-4" />
              </button>
            </div>
          </div>
        </div>
      </nav>

      {/* Main Header */}
      <header className="bg-gradient-to-r from-blue-600 via-purple-700 to-indigo-800 text-white">
        <div className="max-w-7xl mx-auto px-4 py-6">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-6">
              <BarangayLogo />
              <div>
                <div className="text-sm opacity-90 mb-1">REPUBLIKA NG PILIPINAS</div>
                <h1 className="text-4xl font-bold mb-1">Barangayan E Management System</h1>
                <div className="text-lg opacity-90">Digital Local Government Services</div>
              </div>
            </div>
            
            {/* Mobile Menu Button */}
            <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>
              <SheetTrigger asChild>
                <Button variant="ghost" size="icon" className="md:hidden text-white">
                  <Menu className="h-6 w-6" />
                </Button>
              </SheetTrigger>
              <SheetContent side="left" className="w-80 overflow-y-auto">
                <SheetHeader>
                  <SheetTitle>Navigation Menu</SheetTitle>
                </SheetHeader>
                <div className="mt-6 space-y-3">
                  <Button variant="ghost" className="w-full justify-start" onClick={() => showSection('home')}>
                    <Home className="mr-2 h-4 w-4" />
                    Home
                  </Button>
                  <Button variant="ghost" className="w-full justify-start" onClick={() => showSection('services')}>
                    <FileText className="mr-2 h-4 w-4" />
                    Services
                  </Button>
                  <Button variant="ghost" className="w-full justify-start" onClick={() => showSection('community')}>
                    <Users className="mr-2 h-4 w-4" />
                    Community
                  </Button>
                  <Button variant="ghost" className="w-full justify-start" onClick={() => showSection('about')}>
                    <Info className="mr-2 h-4 w-4" />
                    About
                  </Button>
                  <Separator />
                  <div className="text-sm font-semibold text-gray-600 mb-2">Quick Access</div>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<SearchModal />)}>
                    <Search className="mr-2 h-4 w-4" />
                    Search Services
                  </Button>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<TourismModal />)}>
                    <Camera className="mr-2 h-4 w-4" />
                    Tourism
                  </Button>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<TransparencyModal />)}>
                    <Eye className="mr-2 h-4 w-4" />
                    Transparency
                  </Button>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<CareersModal />)}>
                    <Briefcase className="mr-2 h-4 w-4" />
                    Careers
                  </Button>
                  <Separator />
                  <div className="text-sm font-semibold text-gray-600 mb-2">Government Services</div>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<EServicesModal />)}>
                    <FileText className="mr-2 h-4 w-4" />
                    E-Services
                  </Button>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<MFormsModal />)}>
                    <Users className="mr-2 h-4 w-4" />
                    M-Forms
                  </Button>
                  <Button variant="ghost" className="w-full justify-start text-sm" onClick={() => showModal(<CitizensCharterModal />)}>
                    <Shield className="mr-2 h-4 w-4" />
                    Citizen's Charter
                  </Button>
                  <Separator />
                  {/* Mobile User Account or Login Button */}
                  {isLoggedIn && currentUser ? (
                    <div className="space-y-3">
                      <Button 
                        variant="ghost" 
                        className="w-full p-3 h-auto justify-start"
                        onClick={() => {
                          setMobileMenuOpen(false);
                          setUserPanelOpen(true);
                        }}
                      >
                        <div className="flex items-center space-x-3">
                          <div className="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                            <UserCircle className="w-6 h-6 text-yellow-600" />
                          </div>
                          <div className="flex-1 text-left">
                            <p className="font-semibold">{currentUser.firstName} {currentUser.lastName}</p>
                            <p className="text-sm text-gray-600">{currentUser.residentId}</p>
                            <p className="text-xs text-gray-500">{currentUser.email}</p>
                          </div>
                        </div>
                      </Button>
                      <Button variant="outline" className="w-full" onClick={handleLogout}>
                        <LogOut className="mr-2 h-4 w-4" />
                        Logout
                      </Button>
                    </div>
                  ) : (
                    <Button className="w-full" onClick={() => showModal(<LoginModal />)}>
                      Login
                    </Button>
                  )}
                </div>
              </SheetContent>
            </Sheet>

            {/* Desktop Navigation */}
            <div className="hidden md:flex items-center space-x-6">
              <Button variant="ghost" className="text-white hover:bg-white hover:bg-opacity-20" onClick={() => showSection('home')}>
                Home
              </Button>
              <Button variant="ghost" className="text-white hover:bg-white hover:bg-opacity-20" onClick={() => showSection('services')}>
                Services
              </Button>
              <Button variant="ghost" className="text-white hover:bg-white hover:bg-opacity-20" onClick={() => showSection('community')}>
                Community
              </Button>
              <Button variant="ghost" className="text-white hover:bg-white hover:bg-opacity-20" onClick={() => showSection('about')}>
                About
              </Button>
              <Button variant="ghost" className="text-white hover:bg-white hover:bg-opacity-20 relative" onClick={() => alert('You have 5 new notifications:\n• Document ready for pickup\n• Payment reminder\n• Community event\n• New feature available\n• Volunteer recognition')}>
                <Bell className="h-4 w-4 mr-1" />
                <Badge className="absolute -top-2 -right-2 bg-red-500 text-white text-xs">5</Badge>
              </Button>
              
              {/* User Account or Login Button */}
              {isLoggedIn && currentUser ? (
                <Button 
                  variant="ghost" 
                  className="text-white hover:bg-white hover:bg-opacity-20 px-3 py-2 h-auto"
                  onClick={() => setUserPanelOpen(true)}
                >
                  <div className="flex items-center space-x-2">
                    <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                      <UserCircle className="w-5 h-5 text-blue-600" />
                    </div>
                    <div className="text-left">
                      <p className="text-sm font-semibold text-white">{currentUser.firstName} {currentUser.lastName}</p>
                      <p className="text-xs text-blue-100">{currentUser.residentId}</p>
                    </div>
                  </div>
                </Button>
              ) : (
                <Button variant="secondary" onClick={() => showModal(<LoginModal />)}>
                  Login
                </Button>
              )}
            </div>
          </div>
        </div>
      </header>

      {/* Welcome Banner */}
      <div className="bg-gradient-to-r from-blue-600 to-purple-800 py-12">
        <div className="max-w-7xl mx-auto px-4 text-center">
          <h2 className="text-3xl font-bold text-white mb-4">Welcome to Digital Governance</h2>
          <p className="text-blue-100 text-lg mb-6">Connecting communities through technology and innovation</p>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
            <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4">
              <h3 className="text-white font-semibold mb-2">Efficient Services</h3>
              <p className="text-blue-100 text-sm">Fast and reliable digital government services</p>
            </div>
            <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4">
              <h3 className="text-white font-semibold mb-2">Transparent Operations</h3>
              <p className="text-blue-100 text-sm">Open access to government information</p>
            </div>
            <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4">
              <h3 className="text-white font-semibold mb-2">Community Focused</h3>
              <p className="text-blue-100 text-sm">Built for the people, by the people</p>
            </div>
          </div>
        </div>
      </div>

      {/* Navigation Breadcrumb */}
      <div className="bg-purple-900/95 backdrop-blur-sm text-white py-3">
        <div className="max-w-7xl mx-auto px-4">
          <div className="flex flex-wrap gap-x-6 gap-y-2 text-sm">
            <button onClick={() => showModal(<EServicesModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <FileText className="w-3 h-3 mr-1" />
              E-SERVICES
            </button>
            <button onClick={() => showModal(<MFormsModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <Users className="w-3 h-3 mr-1" />
              M-FORMS
            </button>
            <button onClick={() => showModal(<EmployeePortalModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <UserCircle className="w-3 h-3 mr-1" />
              EMPLOYEE'S PORTAL
            </button>
            <button onClick={() => showModal(<BarangayPortalModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <Building className="w-3 h-3 mr-1" />
              BARANGAY PORTAL
            </button>
            <button onClick={() => showModal(<CitizensCharterModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <Shield className="w-3 h-3 mr-1" />
              CITIZEN'S CHARTER
            </button>
            <button onClick={() => showModal(<RequirementsOrdinancesModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <Gavel className="w-3 h-3 mr-1" />
              REQUIREMENTS & ORDINANCES
            </button>
            <button onClick={() => showModal(<FeedbackModal />)} className="hover:text-blue-200 transition-colors flex items-center">
              <MessageSquare className="w-3 h-3 mr-1" />
              FEEDBACK
            </button>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 py-8 mt-2">
        {currentSection === 'home' && (
          <div className="space-y-12">
            {/* Quick Services */}
            <section>
              <h2 className="text-3xl font-bold text-center mb-8">Quick Services</h2>
              <ServiceCards />
            </section>

            {/* Content Grid */}
            <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
              {/* Online Web Services */}
              <Card>
                <CardHeader className="bg-blue-600 text-white">
                  <CardTitle className="flex items-center">
                    <FileText className="mr-2" />
                    Online Web Services
                  </CardTitle>
                </CardHeader>
                <CardContent className="p-4 space-y-3">
                  <Button variant="outline" className="w-full justify-start text-sm" onClick={() => showModal(<DocumentRequestModal />)}>
                    <FileText className="mr-2 h-4 w-4" />
                    Online Business Permit Application
                  </Button>
                  <Button variant="outline" className="w-full justify-start text-sm" onClick={() => alert('Online City Services coming soon!')}>
                    <Building className="mr-2 h-4 w-4" />
                    Online City Services
                  </Button>
                </CardContent>
              </Card>

              {/* Mayor's Corner */}
              <Card>
                <CardHeader className="bg-green-600 text-white">
                  <CardTitle className="flex items-center">
                    <Users className="mr-2" />
                    Barangay Captain's Corner
                  </CardTitle>
                </CardHeader>
                <CardContent className="p-4 space-y-3">
                  <div className="text-center">
                    <div className="w-16 h-16 bg-gray-200 rounded-full mx-auto mb-2"></div>
                    <h4 className="font-semibold">Capt. Maria Santos</h4>
                    <p className="text-sm text-gray-600">Barangay Captain</p>
                  </div>
                  <p className="text-sm">Leading digital transformation in our community for better services and transparency.</p>
                </CardContent>
              </Card>

              {/* Publications */}
              <Card>
                <CardHeader className="bg-orange-600 text-white">
                  <CardTitle className="flex items-center">
                    <Megaphone className="mr-2" />
                    Publications
                  </CardTitle>
                </CardHeader>
                <CardContent className="p-4 space-y-3">
                  <div className="space-y-2">
                    <div className="border-l-4 border-blue-500 pl-3">
                      <h5 className="font-semibold text-sm">2024 Financial Documents</h5>
                      <p className="text-xs text-gray-600">Updated: Jan 2024</p>
                    </div>
                    <div className="border-l-4 border-green-500 pl-3">
                      <h5 className="font-semibold text-sm">2023 - Q4 Financial Reports</h5>
                      <p className="text-xs text-gray-600">Updated: Dec 2023</p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Bids & Procurements */}
              <Card>
                <CardHeader className="bg-purple-600 text-white">
                  <CardTitle className="flex items-center">
                    <AlertTriangle className="mr-2" />
                    Bids & Procurements
                  </CardTitle>
                </CardHeader>
                <CardContent className="p-4 space-y-3">
                  <div className="space-y-2">
                    <div className="text-sm">
                      <h5 className="font-semibold">Supply and Delivery of Office Supplies</h5>
                      <p className="text-xs text-gray-600">Deadline: March 30, 2024</p>
                    </div>
                    <div className="text-sm">
                      <h5 className="font-semibold">Procurement of Janitorial Services</h5>
                      <p className="text-xs text-gray-600">Deadline: April 15, 2024</p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Latest Announcements */}
            <section>
              <Card>
                <CardHeader>
                  <CardTitle>Latest Announcements</CardTitle>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="border-l-4 border-blue-500 pl-4 py-3 bg-blue-50 rounded-r-lg">
                    <h4 className="font-semibold text-blue-800">Community Health Program</h4>
                    <p className="text-blue-700 text-sm mt-1">Free health checkup and vaccination drive this Saturday at the Barangay Hall.</p>
                    <span className="text-xs text-blue-600">2 hours ago</span>
                  </div>
                  <div className="border-l-4 border-green-500 pl-4 py-3 bg-green-50 rounded-r-lg">
                    <h4 className="font-semibold text-green-800">Digital Voting System Launch</h4>
                    <p className="text-green-700 text-sm mt-1">New digital voting platform now available for community polls and surveys.</p>
                    <span className="text-xs text-green-600">1 day ago</span>
                  </div>
                  <div className="border-l-4 border-yellow-500 pl-4 py-3 bg-yellow-50 rounded-r-lg">
                    <h4 className="font-semibold text-yellow-800">Multi-language Support Added</h4>
                    <p className="text-yellow-700 text-sm mt-1">Barangayan app now supports Cebuano, Tagalog, and English languages.</p>
                    <span className="text-xs text-yellow-600">3 days ago</span>
                  </div>
                </CardContent>
              </Card>
            </section>
          </div>
        )}

        {currentSection === 'services' && (
          <div className="space-y-8">
            <h2 className="text-3xl font-bold text-center">All Services</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<DocumentRequestModal />)}>
                <CardContent className="p-6 text-center">
                  <FileText className="w-12 h-12 mx-auto mb-4 text-blue-600" />
                  <h3 className="font-semibold mb-2">Document Request</h3>
                  <p className="text-sm text-gray-600">Request certificates and track status</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<PaymentsModal />)}>
                <CardContent className="p-6 text-center">
                  <CreditCard className="w-12 h-12 mx-auto mb-4 text-green-600" />
                  <h3 className="font-semibold mb-2">Online Payments</h3>
                  <p className="text-sm text-gray-600">Pay barangay fees online</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<AnnouncementsModal />)}>
                <CardContent className="p-6 text-center">
                  <Megaphone className="w-12 h-12 mx-auto mb-4 text-red-600" />
                  <h3 className="font-semibold mb-2">Announcements</h3>
                  <p className="text-sm text-gray-600">Official announcements and alerts</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<EventCalendarModal />)}>
                <CardContent className="p-6 text-center">
                  <Calendar className="w-12 h-12 mx-auto mb-4 text-purple-600" />
                  <h3 className="font-semibold mb-2">Event Calendar</h3>
                  <p className="text-sm text-gray-600">View and register for events</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<FeedbackModal />)}>
                <CardContent className="p-6 text-center">
                  <MessageSquare className="w-12 h-12 mx-auto mb-4 text-orange-600" />
                  <h3 className="font-semibold mb-2">Feedback System</h3>
                  <p className="text-sm text-gray-600">Submit suggestions and feedback</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<EmergencyServicesModal />)}>
                <CardContent className="p-6 text-center">
                  <Car className="w-12 h-12 mx-auto mb-4 text-red-500" />
                  <h3 className="font-semibold mb-2">Emergency Services</h3>
                  <p className="text-sm text-gray-600">Quick access to emergency contacts</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<FacilityBookingModal />)}>
                <CardContent className="p-6 text-center">
                  <Building className="w-12 h-12 mx-auto mb-4 text-indigo-600" />
                  <h3 className="font-semibold mb-2">Facility Booking</h3>
                  <p className="text-sm text-gray-600">Reserve community facilities</p>
                </CardContent>
              </Card>
              
              <Card className="cursor-pointer hover:shadow-lg transition-shadow" onClick={() => showModal(<ProfileModal />)}>
                <CardContent className="p-6 text-center">
                  <UserCircle className="w-12 h-12 mx-auto mb-4 text-teal-600" />
                  <h3 className="font-semibold mb-2">Profile Management</h3>
                  <p className="text-sm text-gray-600">Manage your resident profile</p>
                </CardContent>
              </Card>
            </div>
          </div>
        )}

        {currentSection === 'community' && (
          <div className="space-y-8">
            <h2 className="text-3xl font-bold text-center">Community Hub</h2>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <Card>
                <CardHeader>
                  <CardTitle>Community Discussion</CardTitle>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="space-y-4 max-h-64 overflow-y-auto">
                    <div className="flex items-start space-x-3">
                      <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold">JD</div>
                      <div className="flex-1">
                        <div className="bg-gray-100 rounded-lg p-3">
                          <p className="text-sm">How's the new digital voting system?</p>
                        </div>
                        <span className="text-xs text-gray-500">Juan Dela Cruz • 5 min ago</span>
                      </div>
                    </div>
                    <div className="flex items-start space-x-3">
                      <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-semibold">MS</div>
                      <div className="flex-1">
                        <div className="bg-gray-100 rounded-lg p-3">
                          <p className="text-sm">It's great! Easy to use and secure.</p>
                        </div>
                        <span className="text-xs text-gray-500">Maria Santos • 3 min ago</span>
                      </div>
                    </div>
                  </div>
                  <Button className="w-full" onClick={() => alert('Community chat feature coming soon! This will allow residents to discuss community matters in real-time.')}>Join Discussion</Button>
                </CardContent>
              </Card>
              
              <Card>
                <CardHeader>
                  <CardTitle>Top Volunteers</CardTitle>
                </CardHeader>
                <CardContent className="space-y-3">
                  <div className="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                    <div className="flex items-center">
                      <Shield className="text-yellow-500 mr-3" />
                      <div>
                        <p className="font-semibold">Ana Reyes</p>
                        <p className="text-sm text-gray-600">Community Cleanup Champion</p>
                      </div>
                    </div>
                    <Badge className="bg-yellow-500 text-white">1,250 pts</Badge>
                  </div>
                  <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div className="flex items-center">
                      <Shield className="text-gray-400 mr-3" />
                      <div>
                        <p className="font-semibold">Carlos Mendoza</p>
                        <p className="text-sm text-gray-600">Health Drive Volunteer</p>
                      </div>
                    </div>
                    <Badge variant="secondary">980 pts</Badge>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        )}

        {currentSection === 'about' && (
          <div className="space-y-8">
            <div className="text-center">
              <h2 className="text-3xl font-bold mb-4">About Barangayan E Management System</h2>
              <p className="text-xl text-gray-600 max-w-3xl mx-auto">Empowering communities through digital innovation and accessible government services</p>
            </div>
            
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
              <div>
                <h3 className="text-2xl font-bold mb-6">Our Mission</h3>
                <p className="text-gray-600 mb-4">
                  Barangayan E Management System is designed to bridge the gap between local government and residents through technology. 
                  We believe that every Filipino deserves access to efficient, transparent, and responsive government services.
                </p>
                <div className="space-y-3">
                  <div className="flex items-center">
                    <div className="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Accessible to all residents</span>
                  </div>
                  <div className="flex items-center">
                    <div className="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Multi-language support</span>
                  </div>
                  <div className="flex items-center">
                    <div className="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Secure and transparent</span>
                  </div>
                </div>
              </div>
              <div className="text-center">
                <BarangayLogo />
                <div className="mt-4">
                  <h4 className="font-semibold">Serving the Community</h4>
                  <p className="text-sm text-gray-600">Digital governance for a better tomorrow</p>
                </div>
              </div>
            </div>
          </div>
        )}
      </main>

      {/* Footer */}
      <footer className="bg-gray-800 text-white py-12 mt-16">
        <div className="max-w-7xl mx-auto px-4">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <div className="flex items-center mb-4">
                <div className="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mr-2">
                  <Building className="w-4 h-4 text-white" />
                </div>
                <span className="font-bold text-lg">Barangayan</span>
              </div>
              <p className="text-gray-400">Connecting communities through digital innovation.</p>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Quick Links</h4>
              <ul className="space-y-2 text-gray-400">
                <li><button onClick={() => showSection('home')} className="hover:text-white transition-colors">Home</button></li>
                <li><button onClick={() => showSection('services')} className="hover:text-white transition-colors">Services</button></li>
                <li><button onClick={() => showSection('community')} className="hover:text-white transition-colors">Community</button></li>
                <li><button onClick={() => showSection('about')} className="hover:text-white transition-colors">About</button></li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Services</h4>
              <ul className="space-y-2 text-gray-400">
                <li><button onClick={() => showModal(<DocumentRequestModal />)} className="hover:text-white transition-colors">Document Request</button></li>
                <li><button onClick={() => showModal(<PaymentsModal />)} className="hover:text-white transition-colors">Online Payments</button></li>
                <li><button onClick={() => showModal(<FacilityBookingModal />)} className="hover:text-white transition-colors">Facility Booking</button></li>
                <li><button onClick={() => showModal(<EmergencyServicesModal />)} className="hover:text-white transition-colors">Emergency Services</button></li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Contact</h4>
              <div className="space-y-2 text-gray-400">
                <p><MapPin className="inline w-4 h-4 mr-2" />Barangay Hall, Main Street</p>
                <p><Phone className="inline w-4 h-4 mr-2" />(032) 123-4567</p>
                <p><Mail className="inline w-4 h-4 mr-2" />info@barangayan.gov</p>
              </div>
            </div>
          </div>
          <Separator className="my-8 bg-gray-700" />
          <div className="text-center text-gray-400">
            <p>&copy; 2024 Barangayan E Management System. All rights reserved.</p>
          </div>
        </div>
      </footer>

      {/* User Profile Panel */}
      <Sheet open={userPanelOpen} onOpenChange={setUserPanelOpen}>
        <UserProfilePanel />
      </Sheet>

      {/* Dialog Modal */}
      <Dialog open={modalOpen} onOpenChange={setModalOpen}>
        {modalContent}
      </Dialog>

      {/* Toast Notifications */}
      <Toaster position="top-right" richColors />
    </div>
  );
}

// Wrap with AuthProvider for export
export default function App() {
  return (
    <AuthProvider>
      <AppContent />
    </AuthProvider>
  );
}

// Component to handle auth state
function AppContent() {
  const { isLoggedIn, isLoading } = useAuth();
  
  // Show loading state while checking auth
  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center">
        <div className="text-center text-white">
          <div className="w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-lg">Loading Barangayan System...</p>
        </div>
      </div>
    );
  }
  
  // Show auth pages if not logged in
  if (!isLoggedIn) {
    return <AuthPages />;
  }
  
  // Show main app if logged in
  return <BarangayanApp />;
}
